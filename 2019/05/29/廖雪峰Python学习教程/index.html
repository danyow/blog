<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>å»–é›ªå³°Pythonå­¦ä¹ æ•™ç¨‹</title>
  <meta name="description" content="å°ç™½å…¥é—¨, ä»¥å‰çš„ç¬”è®°ã€‚">
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://blog.danyow.cn/2019/05/29/%E5%BB%96%E9%9B%AA%E5%B3%B0Python%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/">
  
  
  <link rel="alternate" type="application/rss+xml" title="ğŸ“’ Danyow" href="https://blog.danyow.cn/feed.xml">

  

  
  <meta property="og:title" content="å»–é›ªå³°Pythonå­¦ä¹ æ•™ç¨‹">
  <meta property="og:site_name" content="ğŸ“’ Danyow">
  <meta property="og:url" content="https://blog.danyow.cn/2019/05/29/%E5%BB%96%E9%9B%AA%E5%B3%B0Python%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/">
  <meta property="og:description" content="å°ç™½å…¥é—¨, ä»¥å‰çš„ç¬”è®°ã€‚">
  
  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:title" content="å»–é›ªå³°Pythonå­¦ä¹ æ•™ç¨‹">
  <meta name="twitter:description" content="å°ç™½å…¥é—¨, ä»¥å‰çš„ç¬”è®°ã€‚">
  
  

  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Bitter:400,400i,700&display=swap" rel="stylesheet">

  

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">ğŸ“’ Danyow</a>

    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/">å…³äº</a>
      
        
        <a class="page-link" href="/archives/">å½’æ¡£</a>
      
        
        <a class="page-link" href="https://github.com/danyow">GitHub</a>
      
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    
      <h1 class="post-title" itemprop="name headline">å»–é›ªå³°Pythonå­¦ä¹ æ•™ç¨‹</h1>
    
    <p class="post-meta"><time datetime="2019-05-29T14:19:59+00:00" itemprop="datePublished">May 29, 2019</time> â€¢
  
    
    
      
    
      
    
      
    
      
    
      
        <a href="/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</a>,
      
    
      
    
      
    
      
    
      
    
  
    
    
      
    
      
    
      
    
      
    
      
    
      
        <a href="/categories/python/">python</a>
      
    
      
    
      
    
      
    
  



</p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>å°ç™½å…¥é—¨, ä»¥å‰çš„ç¬”è®°ã€‚</p>

<h2 id="å‡½æ•°">å‡½æ•°</h2>

<h3 id="å‡½æ•°çš„å‚æ•°">å‡½æ•°çš„å‚æ•°</h3>

<ul>
  <li>å½“é»˜è®¤å‚æ•°ä¸ºå¯å˜å¯¹è±¡çš„æ—¶å€™ eg:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">add_end</span><span class="p">(</span><span class="n">L</span><span class="o">=</span><span class="p">[]):</span>
    <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'END'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">L</span>

<span class="s">'''
å¦‚æœå¤šæ¬¡è°ƒç”¨è¯¥å‡½æ•°
å°±ä¼šå¯¼è‡´Lçš„å€¼ä¸æ–­é€’å¢
&gt;&gt;&gt; add_end()
['END', 'END']
&gt;&gt;&gt; add_end()
['END', 'END', 'END']
å› ä¸ºLä¹Ÿæ˜¯ä¸€ä¸ªå˜é‡
æ‰€ä»¥æœ€ä½³åšæ³•æ˜¯å°† L=None
åœ¨å‡½æ•°å†…éƒ¨å»åšåˆ¤æ–­
'''</span>
</code></pre></div></div>

<ul>
  <li>å®šä¹‰å¯å˜å‚æ•°çš„çš„å‡½æ•°</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">calc</span><span class="p">(</span><span class="o">*</span><span class="n">numbers</span><span class="p">):</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span>
    <span class="k">return</span> <span class="nb">sum</span>

<span class="s">'''
# å½“å¦‚æœè¦ä½¿ç”¨listä¼ å…¥çš„è¯
'''</span>
<span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">calc</span><span class="p">(</span><span class="o">*</span><span class="n">nums</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>å…³é”®å­—å‚æ•°çš„ç”¨æ³•å’Œå¯å˜å‚æ•°ç±»ä¼¼</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># å®šä¹‰
</span><span class="o">**</span><span class="n">kw</span>
<span class="c1">#è°ƒç”¨
</span><span class="o">&gt;&gt;&gt;</span> <span class="n">extra</span> <span class="o">=</span> <span class="p">{</span><span class="s">'city'</span><span class="p">:</span> <span class="s">'Beijing'</span><span class="p">,</span> <span class="s">'job'</span><span class="p">:</span> <span class="s">'Engineer'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">person</span><span class="p">(</span><span class="s">'Jack'</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="o">**</span><span class="n">extra</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>å‘½åå…³é”®å­—å‚æ•°</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># æ— å¯å˜å‚æ•°æ—¶ å¿…é¡»åŠ å…¥*åˆ†éš”
</span><span class="k">def</span> <span class="nf">person</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">job</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>

<span class="c1"># æœ‰å¯å˜å‚æ•°æ—¶ æ— åºç†ä¼š
</span><span class="k">def</span> <span class="nf">person</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">job</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>å‚æ•°ç»„åˆ</li>
</ul>

<p>ç›®å‰å…±æœ‰äº”ç§å‚æ•°</p>

<ol>
  <li>å¿…é€‰</li>
  <li>é»˜è®¤</li>
  <li>å¯å˜</li>
  <li>å…³é”®å­—</li>
  <li>å‘½åå…³é”®å­—</li>
</ol>

<p>å®šä¹‰å¿…é¡»éµå¾ªä»¥ä¸Šé¡ºåº</p>

<h3 id="é€’å½’å‡½æ•°">é€’å½’å‡½æ•°</h3>

<ul>
  <li>
    <p>é€’å½’éœ€è¦æ³¨æ„ä¸€ç‚¹å°±æ˜¯: é˜²æ­¢å‡½æ•°æ ˆæº¢å‡º</p>
  </li>
  <li>
    <p>å°½å¯èƒ½çš„é‡‡ç”¨å°¾é€’å½’æ–¹å¼æ¥å¤„ç†é€’å½’å‡½æ•°</p>
    <ul>
      <li>å°¾é€’å½’ï¼šå‡½æ•°è¿”å›çš„æ—¶å€™, åªè°ƒç”¨è¯¥å‡½æ•°æœ¬èº«, ä¸èƒ½æ·»åŠ å…¶ä»–çš„è¡¨è¾¾å¼.</li>
    </ul>
  </li>
</ul>

<h2 id="é«˜çº§ç‰¹æ€§">é«˜çº§ç‰¹æ€§</h2>

<h3 id="åˆ‡ç‰‡">åˆ‡ç‰‡</h3>

<ul>
  <li>å½“å¦‚æœé‡‡ç”¨-å·æ¥è¿›è¡Œå€’åºå–æ•°çš„æ—¶å€™, å¹¶ä¸æ˜¯å–å¾—é¡ºåºä¹Ÿæ˜¯å€’çš„, è€Œæ˜¯æ­£åº.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Michael'</span><span class="p">,</span> <span class="s">'Sarah'</span><span class="p">,</span> <span class="s">'Tracy'</span><span class="p">,</span> <span class="s">'Bob'</span><span class="p">,</span> <span class="s">'Jack'</span><span class="p">]</span>
<span class="n">L</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>
<span class="c1"># è¿™ä¸ª-2æŒ‡ä»å€’æ•°ç¬¬äºŒä¸ªå¼€å§‹, ç»§ç»­å¾€åå–å€¼, è€Œä¸æ˜¯å¾€å‰å–å€¼.
# å³: ['Bob', 'Jack']
# è€Œä¸æ˜¯ ['Bob', 'Tracy', 'Sarah', 'Michael']
</span></code></pre></div></div>

<h3 id="è¿­ä»£">è¿­ä»£</h3>

<ul>
  <li>
    <p>å­—å…¸ç›´æ¥éå†æ—¶å–å¾—æ˜¯æ‰€æœ‰çš„é”®, éœ€è¦å­—å…¸çš„æ‰€æœ‰å€¼æ˜¯ <code class="highlighter-rouge">dic.values()</code>, æ‰€æœ‰é”®å€¼å¯¹æ˜¯ <code class="highlighter-rouge">dic.items()</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">Iterable</code>: å¯è¿­ä»£ <code class="highlighter-rouge">from collections import Iterable</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">isinstance</code>: åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹ <code class="highlighter-rouge">isinstance(object, class-or-type-or-tuple)</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">enumerate</code> å°†ä¸€ä¸ªlistæ”¹å˜ä¸ºç´¢å¼•-å…ƒç´ å¯¹</p>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'B'</span><span class="p">,</span> <span class="s">'C'</span><span class="p">]):</span>
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="o">...</span>
<span class="mi">0</span> <span class="n">A</span>
<span class="mi">1</span> <span class="n">B</span>
<span class="mi">2</span> <span class="n">C</span>
</code></pre></div></div>

<ul>
  <li>å¯ä»¥åŒæ—¶å¼•ç”¨ä¸¤ä¸ªå˜é‡</li>
</ul>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">)]:</span>
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="o">...</span>
<span class="mi">1</span> <span class="mi">1</span>
<span class="mi">2</span> <span class="mi">4</span>
<span class="mi">3</span> <span class="mi">9</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">for ... in</code> æ˜¯ä¸æ”¯æŒç›´æ¥éå†å­—å…¸çš„æ—¶å€™, åŒæ—¶å–åˆ°é”®å’Œå€¼éœ€è¦ä»¥ä¸‹æ–¹æ³•</li>
</ul>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ä¼šæŠ¥é”™
</span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">'key_1'</span><span class="p">:</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'key_2'</span><span class="p">:</span><span class="s">'2'</span><span class="p">,</span> <span class="s">'key_3'</span><span class="p">:</span><span class="s">'3'</span><span class="p">}</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">key</span> <span class="o">+</span> <span class="n">value</span><span class="p">)</span>

<span class="c1"># åŠ ä¸Šitemsè¿™æ ·å°±ä¸ä¼šæŠ¥é”™äº†
</span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">'key_1'</span><span class="p">:</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'key_2'</span><span class="p">:</span><span class="s">'2'</span><span class="p">,</span> <span class="s">'key_3'</span><span class="p">:</span><span class="s">'3'</span><span class="p">}</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">key</span> <span class="o">+</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="åˆ—è¡¨ç”Ÿæˆå™¨">åˆ—è¡¨ç”Ÿæˆå™¨</h3>

<ul>
  <li><code class="highlighter-rouge">[]</code></li>
</ul>

<h3 id="ç”Ÿæˆå™¨-generator">ç”Ÿæˆå™¨: generator</h3>

<ul>
  <li><code class="highlighter-rouge">()</code> æˆ–è€… <code class="highlighter-rouge">yield</code></li>
</ul>

<h3 id="è¿­ä»£å™¨-iterator">è¿­ä»£å™¨: Iterator</h3>

<ul>
  <li>å‡¡æ˜¯å¯ä½œç”¨äº<code class="highlighter-rouge">for</code>å¾ªç¯çš„å¯¹è±¡éƒ½æ˜¯<code class="highlighter-rouge">Iterable</code>ç±»å‹ï¼›</li>
  <li>å‡¡æ˜¯å¯ä½œç”¨äº<code class="highlighter-rouge">next()</code>å‡½æ•°çš„å¯¹è±¡éƒ½æ˜¯<code class="highlighter-rouge">Iterator</code>ç±»å‹ï¼Œå®ƒä»¬è¡¨ç¤ºä¸€ä¸ªæƒ°æ€§è®¡ç®—çš„åºåˆ—ï¼›</li>
  <li>é›†åˆæ•°æ®ç±»å‹å¦‚<code class="highlighter-rouge">listã€dictã€str</code>ç­‰æ˜¯<code class="highlighter-rouge">Iterable</code>ä½†ä¸æ˜¯<code class="highlighter-rouge">Iterator</code>ï¼Œä¸è¿‡å¯ä»¥é€šè¿‡<code class="highlighter-rouge">iter()</code>å‡½æ•°è·å¾—ä¸€ä¸ª<code class="highlighter-rouge">Iterator</code>å¯¹è±¡ã€‚</li>
  <li><code class="highlighter-rouge">for</code>å¾ªç¯æœ¬è´¨ä¸Šå°±æ˜¯é€šè¿‡ä¸æ–­è°ƒç”¨<code class="highlighter-rouge">next()</code>å‡½æ•°å®ç°çš„</li>
</ul>

<h2 id="å‡½æ•°å¼ç¼–ç¨‹">å‡½æ•°å¼ç¼–ç¨‹</h2>

<h3 id="builtins-å†…ç½®å‡½æ•°">builtins: å†…ç½®å‡½æ•°</h3>

<ul>
  <li><code class="highlighter-rouge">abs</code>å°±åœ¨<code class="highlighter-rouge">import builtins</code></li>
</ul>

<h3 id="é«˜é˜¶å‡½æ•°">é«˜é˜¶å‡½æ•°</h3>

<ul>
  <li>
    <p><code class="highlighter-rouge">map</code> å¯¹æ¯ä¸ªæ•°è¿›è¡Œä¸€æ¬¡å‡½æ•°ç®—æ³•, ç„¶åé‡æ–°ç»„è£…ä¸ºä¸€ä¸ªæ•°ç»„.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">reduce</code> ä» 0, 1 æ¯ä¸¤ä¸ª, ç›´åˆ°æœ€åä¸€ä¸ªæ•°è¿›è¡Œä¸€æ¬¡å‡½æ•°ç®—æ³•, ç„¶åè¿”å›.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">filter</code> éå†æ¯ä¸ªæ•°å¯¹å…¶è¿›è¡Œè¿‡æ»¤ çœŸä¿å­˜, å‡åˆ é™¤.</p>
  </li>
</ul>

<blockquote>
  <p>ä»¥ä¸Šéƒ½æ˜¯è¿”å›çš„æ˜¯ <code class="highlighter-rouge">Iterator</code> ç±»å‹ éœ€è¦ç”¨<code class="highlighter-rouge">list()</code>è®©å…¶ç®—å®Œ.</p>
</blockquote>

<h2 id="æ¨¡å—">æ¨¡å—</h2>

<h3 id="ä½¿ç”¨æ¨¡å—">ä½¿ç”¨æ¨¡å—</h3>

<ul>
  <li>
    <p><code class="highlighter-rouge">sys.argv</code>å­˜å‚¨äº†å‘½ä»¤è¡Œè¾“å…¥å‚æ•°, å½“é•¿åº¦ä¸º1æ—¶æ²¡æœ‰è¾“å…¥å‚æ•°.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">if __name__=='__main__':</code> è¢«å¼•å…¥ä½¿ç”¨æ—¶å¤±æ•ˆ, ä»…åœ¨è¿è¡Œå½“å‰æ–‡ä»¶æ—¶ç”Ÿæ•ˆ, ä¸»è¦ç”¨äºæµ‹è¯•.</p>
  </li>
</ul>

<h3 id="å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—">å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—</h3>

<ul>
  <li>æ¨¡å—æœç´¢è·¯å¾„ ç¯å¢ƒä¿®æ”¹<code class="highlighter-rouge">PYTHONPATH</code></li>
</ul>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ä»…ä»…åœ¨è¿è¡Œæ—¶æ·»åŠ 
</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'/Users/michael/my_py_scripts'</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="é¢å‘å¯¹è±¡ç¼–ç¨‹">é¢å‘å¯¹è±¡ç¼–ç¨‹</h2>

<h3 id="è·å–å¯¹è±¡ä¿¡æ¯">è·å–å¯¹è±¡ä¿¡æ¯</h3>

<ul>
  <li>
    <p>è·å–å¯¹è±¡æ‰€æœ‰æ–¹æ³• <code class="highlighter-rouge">dir()</code></p>
  </li>
  <li>
    <p>ç±»ä¼¼OCåŠ¨æ€è¿è¡Œæ—¶ <code class="highlighter-rouge">getattr()</code> <code class="highlighter-rouge">setattr()</code> <code class="highlighter-rouge">hasattr()</code></p>
  </li>
</ul>

<h2 id="é¢å‘å¯¹è±¡é«˜çº§ç¼–ç¨‹">é¢å‘å¯¹è±¡é«˜çº§ç¼–ç¨‹</h2>

<h3 id="ä½¿ç”¨__slots__">ä½¿ç”¨__slots__</h3>

<ul>
  <li>pythonçš„åŠ¨æ€èƒ½åŠ›å¾ˆå¼º, ç”šè‡³å¯ä»¥ç»™ç±»æ·»åŠ ç»‘å®šä¸€ä¸ªæ–¹æ³•, æˆ–è€…æ˜¯ç»™å¯¹è±¡ç»‘å®šä¸€ä¸ªå‚æ•°. ä½†æœ‰é—®é¢˜å°±æ˜¯æƒ³èµ·é™åˆ¶ä½œç”¨, è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨åˆ°äº†__slots__</li>
</ul>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'age'</span><span class="p">)</span> <span class="c1"># ç”¨tupleå®šä¹‰å…è®¸ç»‘å®šçš„å±æ€§åç§°
</span><span class="s">'''
è¿™é‡Œè¡¥å……ä¸‹ç½‘å‹å‘ç°çš„ä¸€äº›ç°è±¡
1. å¦‚æœè®¾ç½®äº†__slots__ ä½†æ˜¯ç»™ç±»ç›´æ¥ç»‘å®šæ–°çš„å€¼, è¿˜æ˜¯å¯è¡Œ eg: Student.score = 99
2. å¦‚æœé‡‡ç”¨äº†__slots__å†…å«æœ‰åŒä¸‹åˆ’çº¿çš„å˜é‡æ—¶, åœ¨ç»§æ‰¿çš„æ—¶å€™è¯¥ å˜é‡ä¼šå˜å½¢ eg: Person __slots__('__name') Student(Person) __slots__() è¿™æ—¶å€™çš„Studentçš„nameåœ¨ç”¨çš„æ—¶å€™ä¼šæŠ¥é”™. ç”±äºå…¶æ²¡æœ‰æ”¹å†™æœ¬èº«çš„__name, æ‰€ä»¥å·²ç»å˜å½¢ä¸º_Persion__name
'''</span>
</code></pre></div></div>

<h3 id="å®šåˆ¶ç±»">å®šåˆ¶ç±»</h3>

<ul>
  <li><code class="highlighter-rouge">__init__</code>    åˆå§‹åŒ–çš„æ—¶å€™ä½¿ç”¨</li>
  <li><code class="highlighter-rouge">__len__</code>     <code class="highlighter-rouge">len()</code>æ–¹æ³•çš„æ—¶å€™</li>
  <li><code class="highlighter-rouge">__str__</code>     <code class="highlighter-rouge">print()</code>æ–¹æ³•çš„æ—¶å€™</li>
  <li><code class="highlighter-rouge">__repr__</code>    å‘½ä»¤è¡Œç›´æ¥è¾“å‡ºçš„æ—¶å€™</li>
  <li><code class="highlighter-rouge">__iter__</code>    è¿”å›è¿­ä»£æ‰€éœ€è¦çš„å¯¹è±¡</li>
  <li><code class="highlighter-rouge">__next__</code>    è¿”å›ä¸‹ä¸€ä¸ªå–å‡ºæ¥çš„å€¼</li>
  <li><code class="highlighter-rouge">__getitem__</code> <code class="highlighter-rouge">[::]</code>çš„æ–¹å¼å–ä¸‹æ ‡</li>
  <li><code class="highlighter-rouge">__getattr__</code> é€šå¸¸ç”¨ä½œè·å–ä¸€ä¸ªæ²¡æœ‰çš„å€¼å¾—å±æ€§çš„æ—¶å€™</li>
  <li><code class="highlighter-rouge">__call__</code>    åˆ¤æ–­æ˜¯å¦å¯è°ƒç”¨çš„å…·ä½“æ¡ä»¶<code class="highlighter-rouge">callable()</code></li>
</ul>

<h3 id="å…ƒç±»">å…ƒç±»</h3>

<ul>
  <li>ç±»å¯ä»¥é€šè¿‡ <code class="highlighter-rouge">type()</code> ç›´æ¥å»åˆ›å»º.</li>
</ul>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">fn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'world'</span><span class="p">):</span> <span class="c1"># å…ˆå®šä¹‰å‡½æ•°
</span>    <span class="k">print</span><span class="p">(</span><span class="s">'Hello, </span><span class="si">%</span><span class="s">s.'</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
<span class="n">Hello</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s">'Hello'</span><span class="p">,</span> <span class="p">(</span><span class="nb">object</span><span class="p">,),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">hello</span><span class="o">=</span><span class="n">fn</span><span class="p">))</span> <span class="c1"># åˆ›å»ºHello class
</span></code></pre></div></div>

<ul>
  <li>è€Œ<code class="highlighter-rouge">metaclass</code>æœ¬è´¨ä¸Šå°±æ˜¯ç›‘å¬åˆ›å»ºè¿™ä¸ªç±»æ—¶çš„å›è°ƒ, ä»è€Œåœ¨æœ¬æºä¸Šå¤§è§„æ¨¡çš„å»æ”¹åŠ¨è¿™ä¸ªç±»çš„åˆ›å»ºå½¢å¼.</li>
</ul>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ListMetaclass</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="n">attrs</span><span class="p">[</span><span class="s">'add'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyList</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">ListMetaclass</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="s">'''
&gt;&gt;&gt; L = MyList()
&gt;&gt;&gt; L.add(1)
&gt;&gt; L
[1]
'''</span>
</code></pre></div></div>

<h2 id="ioç¼–ç¨‹">IOç¼–ç¨‹</h2>

<h3 id="åºåˆ—åŒ–">åºåˆ—åŒ–</h3>

<ul>
  <li>æ¨¡å‹è½¬json</li>
</ul>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># è‡ªå®šä¹‰æ¨¡å¼
</span><span class="k">def</span> <span class="nf">student2dict</span><span class="p">(</span><span class="n">std</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s">'name'</span><span class="p">:</span> <span class="n">std</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="s">'age'</span><span class="p">:</span> <span class="n">std</span><span class="o">.</span><span class="n">age</span><span class="p">,</span>
        <span class="s">'score'</span><span class="p">:</span> <span class="n">std</span><span class="o">.</span><span class="n">score</span>
    <span class="p">}</span>
<span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">student2dict</span><span class="p">)</span>

<span class="c1"># å·æ‡’æ¨¡å¼
</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="k">lambda</span> <span class="n">obj</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>jsonè½¬æ¨¡å‹</li>
</ul>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">dict2student</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Student</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s">'name'</span><span class="p">],</span> <span class="n">d</span><span class="p">[</span><span class="s">'age'</span><span class="p">],</span> <span class="n">d</span><span class="p">[</span><span class="s">'score'</span><span class="p">])</span>
<span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">,</span> <span class="n">object_hook</span><span class="o">=</span><span class="n">dict2student</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="è¿›ç¨‹å’Œçº¿ç¨‹">è¿›ç¨‹å’Œçº¿ç¨‹</h2>

<h3 id="å¤šçº¿ç¨‹">å¤šçº¿ç¨‹</h3>

<ul>
  <li>
    <p>GIL</p>

    <p>å¯åŠ¨ä¸CPUæ ¸å¿ƒæ•°é‡ç›¸åŒçš„Nä¸ªçº¿ç¨‹ï¼Œåœ¨4æ ¸CPUä¸Šå¯ä»¥ç›‘æ§åˆ°CPUå ç”¨ç‡ä»…æœ‰102%ï¼Œä¹Ÿå°±æ˜¯ä»…ä½¿ç”¨äº†ä¸€æ ¸ã€‚</p>

    <p>ä½†æ˜¯ç”¨Cã€C++æˆ–Javaæ¥æ”¹å†™ç›¸åŒçš„æ­»å¾ªç¯ï¼Œç›´æ¥å¯ä»¥æŠŠå…¨éƒ¨æ ¸å¿ƒè·‘æ»¡ï¼Œ4æ ¸å°±è·‘åˆ°400%ï¼Œ8æ ¸å°±è·‘åˆ°800%ï¼Œä¸ºä»€ä¹ˆPythonä¸è¡Œå‘¢ï¼Ÿ</p>

    <p>å› ä¸ºPythonçš„çº¿ç¨‹è™½ç„¶æ˜¯çœŸæ­£çš„çº¿ç¨‹ï¼Œä½†è§£é‡Šå™¨æ‰§è¡Œä»£ç æ—¶ï¼Œæœ‰ä¸€ä¸ªGILé”ï¼šGlobal Interpreter Lockï¼Œä»»ä½•Pythonçº¿ç¨‹æ‰§è¡Œå‰ï¼Œå¿…é¡»å…ˆè·å¾—GILé”ï¼Œç„¶åï¼Œæ¯æ‰§è¡Œ100æ¡å­—èŠ‚ç ï¼Œè§£é‡Šå™¨å°±è‡ªåŠ¨é‡Šæ”¾GILé”ï¼Œè®©åˆ«çš„çº¿ç¨‹æœ‰æœºä¼šæ‰§è¡Œã€‚è¿™ä¸ªGILå…¨å±€é”å®é™…ä¸ŠæŠŠæ‰€æœ‰çº¿ç¨‹çš„æ‰§è¡Œä»£ç éƒ½ç»™ä¸Šäº†é”ï¼Œæ‰€ä»¥ï¼Œå¤šçº¿ç¨‹åœ¨Pythonä¸­åªèƒ½äº¤æ›¿æ‰§è¡Œï¼Œå³ä½¿100ä¸ªçº¿ç¨‹è·‘åœ¨100æ ¸CPUä¸Šï¼Œä¹Ÿåªèƒ½ç”¨åˆ°1ä¸ªæ ¸ã€‚</p>

    <p>GILæ˜¯Pythonè§£é‡Šå™¨è®¾è®¡çš„å†å²é—ç•™é—®é¢˜ï¼Œé€šå¸¸æˆ‘ä»¬ç”¨çš„è§£é‡Šå™¨æ˜¯å®˜æ–¹å®ç°çš„CPythonï¼Œè¦çœŸæ­£åˆ©ç”¨å¤šæ ¸ï¼Œé™¤éé‡å†™ä¸€ä¸ªä¸å¸¦GILçš„è§£é‡Šå™¨ã€‚</p>

    <p>æ‰€ä»¥ï¼Œåœ¨Pythonä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œä½†ä¸è¦æŒ‡æœ›èƒ½æœ‰æ•ˆåˆ©ç”¨å¤šæ ¸ã€‚å¦‚æœä¸€å®šè¦é€šè¿‡å¤šçº¿ç¨‹åˆ©ç”¨å¤šæ ¸ï¼Œé‚£åªèƒ½é€šè¿‡Cæ‰©å±•æ¥å®ç°ï¼Œä¸è¿‡è¿™æ ·å°±å¤±å»äº†Pythonç®€å•æ˜“ç”¨çš„ç‰¹ç‚¹ã€‚</p>

    <p>ä¸è¿‡ï¼Œä¹Ÿä¸ç”¨è¿‡äºæ‹…å¿ƒï¼ŒPythonè™½ç„¶ä¸èƒ½åˆ©ç”¨å¤šçº¿ç¨‹å®ç°å¤šæ ¸ä»»åŠ¡ï¼Œä½†å¯ä»¥é€šè¿‡å¤šè¿›ç¨‹å®ç°å¤šæ ¸ä»»åŠ¡ã€‚å¤šä¸ªPythonè¿›ç¨‹æœ‰å„è‡ªç‹¬ç«‹çš„GILé”ï¼Œäº’ä¸å½±å“ã€‚</p>
  </li>
</ul>

  </div>

  
    <div class="post-comments" itemprop="comment">
      

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://danyow.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


<script id="dsq-count-scr" src="//danyow.disqus.com/count.js" async></script>


    </div>
  

</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

&copy;  - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="https://blog.danyow.cn/feed.xml">RSS</a>

    </p>

  </div>

</footer>


  </body>

</html>
