<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>Rust</title>
  <meta name="description" content="Title: Mac ä¸‹å­¦ä¹ ä½¿ç”¨ Rust">
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://blog.danyow.cn/2019/12/04/Rust/">
  
  
  <link rel="alternate" type="application/rss+xml" title="ğŸ“’ Danyow" href="https://blog.danyow.cn/feed.xml">

  

  
  <meta property="og:title" content="Rust">
  <meta property="og:site_name" content="ğŸ“’ Danyow">
  <meta property="og:url" content="https://blog.danyow.cn/2019/12/04/Rust/">
  <meta property="og:description" content="Title: Mac ä¸‹å­¦ä¹ ä½¿ç”¨ Rust">
  
  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:title" content="Rust">
  <meta name="twitter:description" content="Title: Mac ä¸‹å­¦ä¹ ä½¿ç”¨ Rust">
  
  

  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Bitter:400,400i,700&display=swap" rel="stylesheet">

  

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">ğŸ“’ Danyow</a>

    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/">å…³äº</a>
      
        
        <a class="page-link" href="/archives/">å½’æ¡£</a>
      
        
        <a class="page-link" href="https://github.com/danyow">GitHub</a>
      
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    
      <h1 class="post-title" itemprop="name headline">Rust</h1>
    
    <p class="post-meta"><time datetime="2019-12-04T14:39:06+00:00" itemprop="datePublished">Dec 4, 2019</time> â€¢
  
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <a href="/categories/mac/">Mac</a>,
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <a href="/categories/rust/">Rust</a>,
      
    
      
    
  
    
    
      
    
      
    
      
    
      
    
      
        <a href="/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</a>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  



</p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Title: Mac ä¸‹å­¦ä¹ ä½¿ç”¨ <em>Rust</em></p>

<h2 id="å®‰è£…">å®‰è£…</h2>

<h3 id="brew-å®‰è£…">brew å®‰è£…</h3>

<p>æµ‹è¯•ä¹‹å, ç¯å¢ƒæœ‰å¾ˆå¤šå†…å®¹æœ‰æ²¡å®‰è£…ä¸Š, ä¼°è®¡ä¹Ÿæ˜¯æ²¡æœ‰é…ç½®ç¯å¢ƒçš„åŸå› </p>

<h3 id="å®˜ç½‘æ–¹æ³•">å®˜ç½‘æ–¹æ³•</h3>

<ol>
  <li>
    <p><code class="highlighter-rouge">curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh</code></p>
  </li>
  <li>
    <p>å¯¼å…¥ç¯å¢ƒå‚æ•° <code class="highlighter-rouge">export PATH="$PATH:$HOME/.cargo/bin"</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">rustc --version</code></p>
  </li>
</ol>

<h2 id="å…¥é—¨">å…¥é—¨</h2>

<h3 id="rustc-ç¼–è¯‘">rustc ç¼–è¯‘</h3>

<p>éšä¾¿å†™ä¸€ä¸ª <code class="highlighter-rouge">main.rs</code> æ–‡ä»¶, ç„¶åé”®å…¥ä¸‹è¿°å†…å®¹.</p>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"Hello, world!"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ç„¶åæ‰§è¡Œ<code class="highlighter-rouge">rustc main.rs</code>å¾—åˆ°ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶<code class="highlighter-rouge">./main</code>å³å¯çœ‹åˆ°æ‰“å°</p>

<h3 id="cargo">Cargo</h3>

<p>å¦‚æœå®‰è£…çš„æ—¶å€™ç”¨çš„æ˜¯å®˜ç½‘çš„æ–¹æ³•çš„è¯, æ˜¯ä¼šè®©ä½ é€‰æ‹©ç¬¬å‡ ä¸ªå®‰è£…æ–¹å¼, æˆ‘ä»¬é€šå¸¸é€‰æ‹©ç¬¬ä¸€ä¸ªé‡‡ç”¨é»˜è®¤çš„æ–¹å¼, è¿™æ ·å°±ä¼šæŠŠCargoæ‰€éœ€è¦çš„ä¹Ÿå°±ä¸€èµ·ä¸‹è½½å®‰è£…ä¸‹æ¥äº†. åœ¨åˆ°æˆ‘ä»¬é…ç½®ç¯å¢ƒè¾“å…¥çš„<code class="highlighter-rouge">PATH</code>ä¹Ÿæ˜¯ä¸€æ ·</p>

<ol>
  <li>
    <p>æ–°å»ºé¡¹ç›®
<code class="highlighter-rouge">cargo new hello_cargo</code></p>
  </li>
  <li>
    <p>ç¼–è¯‘é¡¹ç›®
<code class="highlighter-rouge">cargo build</code> or <code class="highlighter-rouge">cargo build --release</code></p>
  </li>
  <li>
    <p>è¿è¡Œé¡¹ç›®
<code class="highlighter-rouge">cargo run</code></p>
  </li>
</ol>

<h3 id="ç¼–å†™çŒœè°œæ¸¸æˆ">ç¼–å†™çŒœè°œæ¸¸æˆ</h3>

<ol>
  <li>
    <p>ç›´æ¥ç¼–å†™</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>    <span class="c">// ä½¿ç”¨æ ‡å‡†åº“çš„io</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"Guess the number!"</span><span class="p">);</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"Please input your guess."</span><span class="p">);</span>

     <span class="k">let</span> <span class="k">mut</span> <span class="n">guess</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span> <span class="c">// å®šä¹‰ä¸€ä¸ªå¯å˜çš„å˜é‡</span>

     <span class="nn">io</span><span class="p">::</span><span class="nf">stdin</span><span class="p">()</span><span class="nf">.read_line</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">guess</span><span class="p">)</span>   <span class="c">// æ¢è¡Œçš„åŸå› åªæ˜¯å› ä¸ºè¿‡é•¿äº†</span>
         <span class="nf">.expect</span><span class="p">(</span><span class="s">"Failed to read line"</span><span class="p">);</span> <span class="c">// å¤„ç†å¯èƒ½çš„æŠ¥é”™</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"You guessed: {}"</span><span class="p">,</span> <span class="n">guess</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>åŠ å…¥<code class="highlighter-rouge">rand</code>åº“</p>

    <p>åœ¨<code class="highlighter-rouge">Cargo.toml</code>æ–‡ä»¶ä¸­åŠ å…¥</p>

    <div class="language-toml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nn">[dependencies]</span>

 <span class="py">rand</span> <span class="p">=</span> <span class="s">"0.3.14"</span>
</code></pre></div>    </div>

    <p>ç„¶åç¼–è¯‘<code class="highlighter-rouge">cargo build</code>æˆ–è€…æ˜¯<code class="highlighter-rouge">cargo run</code>å¯èƒ½ä¼šé‡åˆ°
 <code class="highlighter-rouge">Blocking waiting for file lock on package cache</code>
 å¦‚æœæ‰§è¡Œå¾—æ˜¯<code class="highlighter-rouge">cargo update</code>å°±ä¸ä¼šé‡åˆ°<code class="highlighter-rouge">Cargo.lock</code>æ–‡ä»¶äº†</p>

    <p>è¿™é‡ŒæŒ‡å®šäº†<code class="highlighter-rouge">0.3.14</code>ç‰ˆæœ¬å¹¶ä¸æ˜¯çœŸçš„å°±åªä½¿ç”¨è¯¥ç‰ˆæœ¬, è€Œæ˜¯ä¼šä½¿ç”¨å…¼å®¹è¯¥ç‰ˆæœ¬çš„æ›´é«˜ç‰ˆæœ¬</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">rand</span><span class="p">::</span><span class="n">Rng</span><span class="p">;</span>  <span class="c">// å¯¼å…¥ éšæœºåº“</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"Guess the number!"</span><span class="p">);</span>

     <span class="k">let</span> <span class="n">secret_number</span> <span class="o">=</span> <span class="nn">rand</span><span class="p">::</span><span class="nf">thread_rng</span><span class="p">()</span><span class="nf">.gen_range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">);</span>   <span class="c">// ç”Ÿæˆä¸€ä¸ª 0 ~ 100 çš„éšæœºæ•°</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"The secret number is: {}"</span><span class="p">,</span> <span class="n">secret_number</span><span class="p">);</span>    <span class="c">// æµ‹è¯•æ‰“å°</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"Please input your guess."</span><span class="p">);</span>

     <span class="k">let</span> <span class="k">mut</span> <span class="n">guess</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>

     <span class="nn">io</span><span class="p">::</span><span class="nf">stdin</span><span class="p">()</span><span class="nf">.read_line</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">guess</span><span class="p">)</span>
         <span class="nf">.expect</span><span class="p">(</span><span class="s">"Failed to read line"</span><span class="p">);</span>

     <span class="c">// trim çš„æ˜¯å°±æ˜¯åˆ é™¤æŸäº›ä¸œè¥¿ ç”±äº é”®å…¥çš„æ—¶å€™æœ€åé¢ä¼šæ•²å‡»å›è½¦ å¯¼è‡´\nä¼šåŠ å…¥è¿›æ¥</span>
     <span class="k">let</span> <span class="n">guess</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="n">guess</span><span class="nf">.trim</span><span class="p">()</span><span class="nf">.parse</span><span class="p">()</span>   <span class="c">// ç”¨ åŒä¸€ä¸ªå˜é‡å å»è¦†ç›– guess å¹¶è½¬æˆ u32ç±»å‹</span>
         <span class="nf">.expect</span><span class="p">(</span><span class="s">"Please type a number!"</span><span class="p">);</span>   <span class="c">// è½¬æ¢ç±»å‹ä¹Ÿæ˜¯æœ‰å¯èƒ½æŠ¥é”™çš„</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"You guessed: {}"</span><span class="p">,</span> <span class="n">guess</span><span class="p">);</span>

     <span class="k">match</span> <span class="n">guess</span><span class="nf">.cmp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">secret_number</span><span class="p">)</span> <span class="p">{</span>
         <span class="nn">Ordering</span><span class="p">::</span><span class="n">Less</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"Too small!"</span><span class="p">),</span>
         <span class="nn">Ordering</span><span class="p">::</span><span class="n">Greater</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"Too big!"</span><span class="p">),</span>
         <span class="nn">Ordering</span><span class="p">::</span><span class="n">Equal</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"You win!"</span><span class="p">),</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>åŠ å…¥å¾ªç¯</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// --snip--</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"The secret number is: {}"</span><span class="p">,</span> <span class="n">secret_number</span><span class="p">);</span>

     <span class="k">loop</span> <span class="p">{</span>  <span class="c">// åŠ å…¥å¾ªç¯</span>
         <span class="nd">println!</span><span class="p">(</span><span class="s">"Please input your guess."</span><span class="p">);</span>

         <span class="c">// --snip--</span>

         <span class="k">match</span> <span class="n">guess</span><span class="nf">.cmp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">secret_number</span><span class="p">)</span> <span class="p">{</span>
             <span class="nn">Ordering</span><span class="p">::</span><span class="n">Less</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"Too small!"</span><span class="p">),</span>
             <span class="nn">Ordering</span><span class="p">::</span><span class="n">Greater</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"Too big!"</span><span class="p">),</span>
             <span class="nn">Ordering</span><span class="p">::</span><span class="n">Equal</span> <span class="k">=&gt;</span> <span class="p">{</span>
                 <span class="nd">println!</span><span class="p">(</span><span class="s">"You win!"</span><span class="p">);</span>
                 <span class="k">break</span><span class="p">;</span>  <span class="c">// åœ¨è¿™é‡Œé€€å‡ºå¾ªç¯</span>
             <span class="p">},</span>
         <span class="p">}</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å¤„ç†éæ•°å­—çš„è¾“å…¥</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// --snip--</span>

 <span class="nn">io</span><span class="p">::</span><span class="nf">stdin</span><span class="p">()</span><span class="nf">.read_line</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">guess</span><span class="p">)</span>
     <span class="nf">.expect</span><span class="p">(</span><span class="s">"Failed to read line"</span><span class="p">);</span>

 <span class="c">// åŠ å…¥matchæ¥å¯¹æŠ¥é”™çš„ continueæ¥å¤„ç†éæ•°å­—çš„è¾“å…¥</span>
 <span class="k">let</span> <span class="n">guess</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="k">match</span> <span class="n">guess</span><span class="nf">.trim</span><span class="p">()</span><span class="nf">.parse</span><span class="p">()</span> <span class="p">{</span>
     <span class="nf">Ok</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">num</span><span class="p">,</span>
     <span class="nf">Err</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">continue</span><span class="p">,</span>
 <span class="p">};</span>

 <span class="nd">println!</span><span class="p">(</span><span class="s">"You guessed: {}"</span><span class="p">,</span> <span class="n">guess</span><span class="p">);</span>

 <span class="c">// --snip--</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="é€šç”¨ç¼–ç¨‹æ¦‚å¿µ">é€šç”¨ç¼–ç¨‹æ¦‚å¿µ</h3>

<h4 id="å˜é‡å’Œå¯å˜æ€§">å˜é‡å’Œå¯å˜æ€§</h4>

<ol>
  <li>è¿™é‡Œçš„å˜é‡ä¸æ˜¯æŒ‡èƒ½å˜çš„é‡, è€Œæ˜¯ä¸€ä¸ªå®šä¹‰, ä½†åªè¦èµ‹äºˆäº† <code class="highlighter-rouge">mut</code> æ‰æ˜¯çœŸçš„å¯ä»¥å˜</li>
  <li>å¸¸é‡çš„å‘½åè§„åˆ™ å•è¯å…¨å¤§å†™ ä¸‹åˆ’çº¿åˆ†éš” å°±è¿int <code class="highlighter-rouge">100,000</code> éƒ½å¯ä»¥è¡¨ç¤ºä¸º <code class="highlighter-rouge">100_000</code></li>
  <li>å˜é‡å¯ä»¥è¢«é‡å¤å£°æ˜å¹¶è¦†ç›–åŸå€¼ ä½†ä¸èƒ½æ”¹å˜åŸæœ‰æ•°æ®ç±»å‹ ä¹Ÿå°±æ˜¯ä¸èƒ½ string =&gt; int</li>
</ol>

<h4 id="èµ„æ–™ç±»å‹">èµ„æ–™ç±»å‹</h4>

<ol>
  <li>
    <p>ç¼–è¯‘æ—¶éœ€è¦å¸®å¿™ç¡®å®šç±»å‹</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="n">guess</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="s">"42"</span><span class="nf">.parse</span><span class="p">()</span><span class="nf">.expect</span><span class="p">(</span><span class="s">"Not a number!"</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ•´å‹çš„è¡¨ç¤ºå½¢å¼æœ‰</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cm">/*
     å°æ•°        98_222
     åå…­        0xff
     å…«è¿›        0o77
     äºŒå…ƒ        0b1111_0000
     å­—èŠ‚ï¼ˆu8ä»…ï¼‰ b'A'
 */</span>
</code></pre></div>    </div>
  </li>
  <li>boolç±»å‹å°±åªæœ‰çœŸå‡ ä¸ä¼šé»˜è®¤å¸®å¿™è½¬æ¢</li>
  <li>
    <p>å…ƒç»„</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="nb">i32</span><span class="p">,</span> <span class="nb">f64</span><span class="p">,</span> <span class="nb">u8</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mf">6.4</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
     <span class="k">let</span> <span class="n">five_hundred</span> <span class="o">=</span> <span class="n">x</span><span class="err">.</span><span class="mi">0</span><span class="p">;</span>
     <span class="k">let</span> <span class="n">six_point_four</span> <span class="o">=</span> <span class="n">x</span><span class="err">.</span><span class="mi">1</span><span class="p">;</span>
     <span class="k">let</span> <span class="n">one</span> <span class="o">=</span> <span class="n">x</span><span class="err">.</span><span class="mi">2</span><span class="p">;</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ•°ç»„</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">c</span><span class="p">:</span> <span class="p">[</span><span class="nb">i32</span><span class="p">;</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">;</span> <span class="mi">5</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">first</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">second</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="å‡½æ•°">å‡½æ•°</h4>

<ol>
  <li>ä¸å¸¦;è¡¨ç¤ºè¿”å›å€¼</li>
  <li>
    <p>æŒ‡å®šè¿”å›å€¼</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">plus_one</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
     <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="æ³¨é‡Š">æ³¨é‡Š</h4>

<p>è®²è§£Crates.ioçš„æ—¶å€™æ‰è¯´</p>

<h4 id="æ§åˆ¶æµ">æ§åˆ¶æµ</h4>

<ol>
  <li>
    <p>ä½¿ç”¨<code class="highlighter-rouge">if</code>çš„<code class="highlighter-rouge">let</code>è¯­å¥</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">condition</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
     <span class="k">let</span> <span class="n">number</span> <span class="o">=</span> <span class="k">if</span> <span class="n">condition</span> <span class="p">{</span>
         <span class="mi">5</span>
     <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="mi">6</span>
     <span class="p">};</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"The value of number is: {}"</span><span class="p">,</span> <span class="n">number</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ä»å¾ªç¯é‡Œé¢è¿”å›å€¼å‡ºæ¥</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

     <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="k">loop</span> <span class="p">{</span>
         <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>

         <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="mi">10</span> <span class="p">{</span>
             <span class="k">break</span> <span class="n">counter</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span><span class="c">// æˆ‘åœ¨æƒ³ è¿™é‡Œæ²¡æœ‰; ä¸ºä»€ä¹ˆä¹Ÿèƒ½æœ‰å€¼è¿”å›å‡ºå»å‘¢?</span>
         <span class="p">}</span>
     <span class="p">};</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"The result is {}"</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>éå†</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">];</span>

     <span class="c">// æ–¹æ³•1</span>
     <span class="k">for</span> <span class="n">element</span> <span class="n">in</span> <span class="n">a</span><span class="nf">.iter</span><span class="p">()</span> <span class="p">{</span>
         <span class="nd">println!</span><span class="p">(</span><span class="s">"the value is: {}"</span><span class="p">,</span> <span class="n">element</span><span class="p">);</span>
     <span class="p">}</span>
     <span class="c">// æ–¹æ³•2</span>
     <span class="k">for</span> <span class="n">number</span> <span class="nf">in</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">4</span><span class="p">)</span><span class="nf">.rev</span><span class="p">()</span> <span class="p">{</span>
         <span class="nd">println!</span><span class="p">(</span><span class="s">"{}!"</span><span class="p">,</span> <span class="n">number</span><span class="p">);</span>
     <span class="p">}</span>
     <span class="c">// æ–¹æ³•3</span>
     <span class="k">while</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="p">{</span>
         <span class="nd">println!</span><span class="p">(</span><span class="s">"the value is: {}"</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
         <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="æ‰€æœ‰æƒ">æ‰€æœ‰æƒ</h3>

<h4 id="ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ">ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ</h4>

<ol>
  <li>
    <p>æ¯ä¸ªå†…å­˜åªèƒ½è¢«æ‰€æœ‰ä¸€æ¬¡, ä¸€æ—¦è¢«æ¥ç®¡äº†å°±æ²¡äº†.</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// ä¸‹è¿°ä»£ç å°±ä¼šæŠ¥é”™</span>
 <span class="k">let</span> <span class="n">s1</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">s1</span><span class="p">;</span>

 <span class="nd">println!</span><span class="p">(</span><span class="s">"{}, world!"</span><span class="p">,</span> <span class="n">s1</span><span class="p">);</span>

 <span class="cm">/*
     error[E0382]: use of moved value: `s1`
     --&gt; src/main.rs:5:28
     |
     3 |     let s2 = s1;
     |         -- value moved here
     4 |
     5 |     println!("{}, world!", s1);
     |                            ^^ value used here after move
     |
     = note: move occurs because `s1` has type `std::string::String`, which does
     not implement the `Copy` trait
 */</span>
</code></pre></div>    </div>
  </li>
  <li>å¦‚æœæƒ³è¦æ‹¿åˆ°ä¸€æ ·çš„å†…å®¹çš„è¯ ä½¿ç”¨ <code class="highlighter-rouge">clone</code></li>
  <li>å¯¹åŸºç¡€æ•°æ®ç±»å‹æ“ä½œçš„æ˜¯ ä¼šè‡ªåŠ¨è°ƒç”¨ <code class="highlighter-rouge">copy</code>, ç”±äºéƒ½æ˜¯åœ¨æ ˆåŒº, ä¸ä¼šäº§ç”Ÿæ–°çš„å†…å­˜ç©ºé—´</li>
  <li>å¦‚æœç›´æ¥æŠŠæŸä¸ªå˜é‡äº¤ä»˜ç»™æŸä¸ªå‡½æ•°, è€Œè¯¥å‡½æ•°æ²¡æœ‰ç§»äº¤æ‰€æœ‰æƒå‡ºæ¥çš„è¯, ä»–å°†ä¸èƒ½å†è¢«ä½¿ç”¨äº†</li>
</ol>

<h3 id="å¼•ç”¨å’Œå€Ÿé˜…">å¼•ç”¨å’Œå€Ÿé˜…</h3>

<ol>
  <li>
    <p><code class="highlighter-rouge">&amp;</code> è¡¨ç¤ºå¼•ç”¨è¯¥å‚æ•°, ä½†ä¸èƒ½è¿›è¡Œå˜æ›´, å¦‚æœè¦å˜æ›´çš„è¯ éœ€è¦ <code class="highlighter-rouge">&amp;mut</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>

     <span class="nf">change</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">s</span><span class="p">);</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">change</span><span class="p">(</span><span class="n">some_string</span><span class="p">:</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">some_string</span><span class="nf">.push_str</span><span class="p">(</span><span class="s">", world"</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>ä¸èƒ½æœ‰ä¸¤æ¬¡å¯å˜å¼•ç”¨, å› ä¸ºä¸çŸ¥é“ä¾æ®è°çš„æ”¹å˜</li>
  <li>
    <p>åŒä¸Š, å¦‚æœè¿˜å­˜åœ¨å¤šä¸ªåç»­ä¾æ—§ä¼šä½¿ç”¨çš„ä¸å¯å˜å¼•ç”¨æ—¶å€™, ä¸èƒ½åˆ›å»ºå¯å˜å¼•ç”¨, å› ä¸ºä¸å¯å˜çš„å¼•ç”¨æ˜¯ä¸çŸ¥é“å¯å˜å¼•ç”¨çš„å­˜åœ¨çš„, ä½†å¦‚æœåœ¨ä½¿ç”¨åå¹¶ä¸”åç»­ä¸å†ä½¿ç”¨äº†ä¹‹å, å°±å…è®¸åˆ›å»ºå¯å˜å¼•ç”¨äº†</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>

 <span class="k">let</span> <span class="n">r1</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">;</span> <span class="c">// no problem</span>
 <span class="k">let</span> <span class="n">r2</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">;</span> <span class="c">// no problem</span>
 <span class="nd">println!</span><span class="p">(</span><span class="s">"{} and {}"</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">);</span>  <span class="c">// è¿™é‡Œä½¿ç”¨ä¹‹å åç»­å°±ä¸å†ä½¿ç”¨äº† è¯´æ˜æ˜¯å¯ä»¥çš„</span>
 <span class="c">// r1 and r2 are no longer used after this point</span>

 <span class="k">let</span> <span class="n">r3</span> <span class="o">=</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="n">s</span><span class="p">;</span> <span class="c">// no problem</span>
 <span class="nd">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span> <span class="n">r3</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ‚¬ç©º, ä»€ä¹ˆæ„æ€å‘¢, å¯ä»¥ç†è§£ä¸ºåƒµå°¸æŒ‡é’ˆ</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">reference_to_nothing</span> <span class="o">=</span> <span class="nf">dangle</span><span class="p">();</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">dangle</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nb">String</span> <span class="p">{</span>    <span class="c">// è¿™é‡Œå°†è¿”å›ä¸€ä¸ªå¸¦æœ‰å¼•ç”¨çš„æ•°æ®ç±»å‹</span>
     <span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>  <span class="c">// ç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹, å¼€è¾Ÿå¯ä»¥ä¸€ä¸ªæ–°çš„å†…å­˜ç©ºé—´</span>

     <span class="o">&amp;</span><span class="n">s</span>  <span class="c">// ç§»äº¤å¼•ç”¨å‡ºå» ä»£è¡¨æ˜¯ æˆ‘åªæ˜¯å€Ÿä½ æ‹¿å»ç”¨çš„æ„æ€</span>
 <span class="p">}</span>   <span class="c">// ä½†è¿™é‡Œå°±å·²ç»è¢«é‡Šæ”¾äº† äº§ç”Ÿ åƒµå°¸æŒ‡é’ˆ</span>

 <span class="k">fn</span> <span class="nf">no_dangle</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>

     <span class="n">s</span>   <span class="c">// è¿™é‡Œæ˜¯æŠŠæ‰€æœ‰æƒç»™å‡ºå»äº† ä»£è¡¨æ˜¯ æˆ‘å¼€è¾Ÿçš„ç©ºé—´ æˆ‘ä¸è¦äº† ä½ æ‹¿å»ç”¨å§</span>
 <span class="p">}</span>   <span class="c">// è¿™æ ·ç»™å‡ºå»çš„å†…å­˜å°±ä¸ä¼šè¢«é‡Šæ”¾äº†</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="åˆ‡ç‰‡ç±»å‹">åˆ‡ç‰‡ç±»å‹</h4>

<ol>
  <li>
    <p>å…ˆçœ‹ä¸€ä¸ªè·å–ç¬¬ä¸€ä¸ªå•è¯çš„å‡½æ•°</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// å€Ÿé˜…ä¸€ä¸ªå­—ç¬¦ä¸²   è¿”å›å•è¯çš„ä¸‹æ ‡</span>
 <span class="k">fn</span> <span class="nf">first_word</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">String</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">usize</span> <span class="p">{</span>
     <span class="c">// è½¬æ¢ä¸ºæ•°ç»„</span>
     <span class="k">let</span> <span class="n">bytes</span> <span class="o">=</span> <span class="n">s</span><span class="nf">.as_bytes</span><span class="p">();</span>

     <span class="c">// éå† bytes.iter() å¹¶ä¸”åˆ›å»ºè¿­ä»£å™¨ enumerate() å¯ä»¥ç†è§£ä¸º enumerate() ä¼šäº§ç”Ÿå‡ºä¸€ä¸ªå…ƒç»„æ¥</span>
     <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">item</span><span class="p">)</span> <span class="n">in</span> <span class="n">bytes</span><span class="nf">.iter</span><span class="p">()</span><span class="nf">.enumerate</span><span class="p">()</span> <span class="p">{</span>
         <span class="c">//  å€Ÿé˜…åˆ°äº† item</span>
         <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="n">b</span><span class="sc">' '</span> <span class="p">{</span>
             <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
         <span class="p">}</span>
     <span class="p">}</span>

     <span class="n">s</span><span class="nf">.len</span><span class="p">()</span> <span class="c">// ä¹ä¸€çœ‹æ²¡æœ‰é—®é¢˜ ä½†, å…¶å®è¿™é‡Œæ¶‰åŠåˆ°äº†å¾ˆå¤šé—®é¢˜, æ¯”æ–¹å•è¯é•¿åº¦æœªçŸ¥å’Œ s è¢«é”€æ¯äº† è¿™ç»„æ•°æ®å°±å¤±æ•ˆäº†</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å¼•å…¥åˆ‡ç‰‡</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>

     <span class="k">let</span> <span class="n">len</span> <span class="o">=</span> <span class="n">s</span><span class="nf">.len</span><span class="p">();</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">2</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="o">..</span><span class="mi">2</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="o">..</span><span class="n">len</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="o">..</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="n">len</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="o">..</span><span class="p">];</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">&amp;str</code> è¡¨ç¤ºçš„æ˜¯åˆ‡ç‰‡ç±»å‹ <code class="highlighter-rouge">&amp;String</code> è¡¨ç¤ºçš„å­—ç¬¦ä¸²ç±»å‹</p>
  </li>
  <li>
    <p>æœ‰äº†åˆ‡ç‰‡è¿™ä¸ªæ¦‚å¿µä¹‹åå°±å¯ä»¥æ”¹å†™å–ç¬¬ä¸€ä¸ªå•è¯çš„å‡½æ•°äº†</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">first_word</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">String</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nb">str</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">bytes</span> <span class="o">=</span> <span class="n">s</span><span class="nf">.as_bytes</span><span class="p">();</span>

     <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">item</span><span class="p">)</span> <span class="n">in</span> <span class="n">bytes</span><span class="nf">.iter</span><span class="p">()</span><span class="nf">.enumerate</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="n">b</span><span class="sc">' '</span> <span class="p">{</span>
             <span class="k">return</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="n">i</span><span class="p">];</span>    <span class="c">// ç›´æ¥è¿”å›åˆ‡ç‰‡</span>
         <span class="p">}</span>
     <span class="p">}</span>
     <span class="c">// åˆšå¥½è¿™é‡Œçš„ s æ˜¯å€Ÿæ¥çš„ æ‰€ä»¥ç›´æ¥æ‹¿ç€è¿™ç©æ„ è½¬å€Ÿç»™åˆ«äººå°±è¡Œäº† æ²¡æˆ‘å•¥äº‹äº†çš„æ„æ€</span>
     <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="o">..</span><span class="p">]</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ä½¿ç”¨ä¸Šè¿°ä»£ç </p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello world"</span><span class="p">);</span>

     <span class="k">let</span> <span class="n">word</span> <span class="o">=</span> <span class="nf">first_word</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s</span><span class="p">);</span> <span class="c">// è¿™ä¸ªåˆ‡ç‰‡è¿˜æ˜¯ç”¨çš„ s çš„</span>

     <span class="n">s</span><span class="nf">.clear</span><span class="p">();</span> <span class="c">// è¿™é‡Œå°±ä¼šç›´æ¥æŠ¥é”™äº† å› ä¸ºä¼šè·å–sçš„å¯å˜å¼•ç”¨å¹¶ä¸”æŠŠå®ƒæ¸…ç©º, è€Œ worldæ˜¯ first_word å€Ÿäº†såˆè½¬æ‰‹ç»™äº†wordçš„ä¸€ä¸ªä¸å¯å˜å¼•ç”¨</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"the first word is: {}"</span><span class="p">,</span> <span class="n">word</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>æŠŠä¼ å…¥çš„ <code class="highlighter-rouge">&amp;String</code> ç±»å‹å˜æˆ <code class="highlighter-rouge">&amp;str</code> ç±»å‹ å°±å¯ä»¥æ¥å— åˆ‡ç‰‡å’Œå­—ç¬¦ä¸²äº† å› ä¸ºå­—ç¬¦ä¸²å°±æ˜¯å…¨åˆ‡ç‰‡</li>
  <li>
    <p>å…¶ä»–çš„åˆ‡ç‰‡</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>    <span class="c">// ä»–çš„ç±»å‹æ˜¯   [i32; 5]</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">];</span>       <span class="c">// åˆ‡ç‰‡çš„ç±»å‹æ˜¯ &amp;[i32]</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="ä½¿ç”¨ç»“æ„ä½“æ¥æ„é€ ç›¸å…³æ•°æ®">ä½¿ç”¨ç»“æ„ä½“æ¥æ„é€ ç›¸å…³æ•°æ®</h3>

<h4 id="å®šä¹‰å’Œå®ä¾‹åŒ–ç»“æ„">å®šä¹‰å’Œå®ä¾‹åŒ–ç»“æ„</h4>

<ol>
  <li>
    <p>å®šä¹‰ä¸€ä¸ªç»“æ„ä½“</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">struct</span> <span class="n">User</span> <span class="p">{</span>
     <span class="n">username</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>   <span class="c">// ç°åœ¨å…ˆä¸å£°æ˜ä¸º &amp;str åˆ‡ç‰‡ç±»å‹ ä¼šæ¶‰åŠåˆ°ç”Ÿå‘½å‘¨æœŸ</span>
     <span class="n">email</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
     <span class="n">sign_in_count</span><span class="p">:</span> <span class="nb">u64</span><span class="p">,</span>
     <span class="n">active</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">build_user</span><span class="p">(</span><span class="n">email</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">User</span> <span class="p">{</span>
     <span class="n">User</span> <span class="p">{</span>
         <span class="n">email</span><span class="p">:</span> <span class="n">email</span><span class="p">,</span>
         <span class="n">username</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
         <span class="n">active</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
         <span class="n">sign_in_count</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
     <span class="p">}</span>
 <span class="p">}</span>
 <span class="c">// ç®€åŒ–å†™æ³•</span>
 <span class="k">fn</span> <span class="nf">build_user</span><span class="p">(</span><span class="n">email</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">User</span> <span class="p">{</span>
     <span class="n">User</span> <span class="p">{</span>
         <span class="n">email</span><span class="p">,</span>
         <span class="n">username</span><span class="p">,</span>
         <span class="n">active</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
         <span class="n">sign_in_count</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
     <span class="p">}</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">user1</span> <span class="o">=</span> <span class="n">User</span> <span class="p">{</span>
         <span class="n">email</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"someone@example.com"</span><span class="p">),</span>
         <span class="n">username</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"someusername123"</span><span class="p">),</span>
         <span class="n">active</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
         <span class="n">sign_in_count</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
     <span class="p">};</span>

     <span class="c">// ç‚¹è¯­æ³•ç›´æ¥æ›´æ”¹</span>
     <span class="n">user1</span><span class="py">.email</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"anotheremail@example.com"</span><span class="p">);</span>

     <span class="c">// æ–°å»ºuser2</span>
     <span class="k">let</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">User</span> <span class="p">{</span>
         <span class="n">email</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"another@example.com"</span><span class="p">),</span>
         <span class="n">username</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"anotherusername567"</span><span class="p">),</span>
         <span class="n">active</span><span class="p">:</span> <span class="n">user1</span><span class="py">.active</span><span class="p">,</span>
         <span class="n">sign_in_count</span><span class="p">:</span> <span class="n">user1</span><span class="py">.sign_in_count</span><span class="p">,</span>
     <span class="p">};</span>

     <span class="c">// ä½†å¯ä»¥å†™æˆè¿™æ ·</span>
     <span class="k">let</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">User</span> <span class="p">{</span>
         <span class="n">email</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"another@example.com"</span><span class="p">),</span>
         <span class="n">username</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"anotherusername567"</span><span class="p">),</span>
         <span class="o">..</span><span class="n">user1</span> <span class="c">// å…¶ä»–å­—æ®µæ²¿ç”¨è¯¥å®ä¾‹</span>
     <span class="p">};</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å…ƒç»„ç»“æ„</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">struct</span> <span class="nf">Color</span><span class="p">(</span><span class="nb">i32</span><span class="p">,</span> <span class="nb">i32</span><span class="p">,</span> <span class="nb">i32</span><span class="p">);</span>
 <span class="k">struct</span> <span class="nf">Point</span><span class="p">(</span><span class="nb">i32</span><span class="p">,</span> <span class="nb">i32</span><span class="p">,</span> <span class="nb">i32</span><span class="p">);</span>

 <span class="k">let</span> <span class="n">black</span> <span class="o">=</span> <span class="nf">Color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">origin</span> <span class="o">=</span> <span class="nf">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ‰“å°ç»“æ„ é¦–å…ˆæ·»åŠ  <code class="highlighter-rouge">#[derive(Debug)]</code> å’Œ ç„¶åæ”¹ <code class="highlighter-rouge">{}</code> ä¸º <code class="highlighter-rouge">{:?}</code> æˆ– <code class="highlighter-rouge">{:#?}</code> å¤šè¡Œæ‰“å°
å•è¡Œæ‰“å° : è¡¨ç¤ºæ‰“å°å‡ºæ¥çš„é”®å€¼ä¸­é—´çš„ : ? è¡¨ç¤ºçš„æ˜¯ å€¼ # è¡¨ç¤ºç«‹èµ·æ¥ å˜æˆå¤šè¡Œ å½¢å¼ä¸»ä¹‰.. ä¸ªäººç†è§£</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="err">#</span><span class="p">[</span><span class="nf">derive</span><span class="p">(</span><span class="n">Debug</span><span class="p">)]</span>
 <span class="k">struct</span> <span class="n">Rectangle</span> <span class="p">{</span>
     <span class="n">width</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
     <span class="n">height</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">test_rect</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">rect1</span> <span class="o">=</span> <span class="n">Rectangle</span> <span class="p">{</span> <span class="n">width</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">50</span> <span class="p">};</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"rect1 is {:?}"</span><span class="p">,</span> <span class="n">rect1</span><span class="p">);</span>   <span class="c">// è¡¨ç¤ºçš„æ„æ€æ˜¯</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"rect1 is {:#?}"</span><span class="p">,</span> <span class="n">rect1</span><span class="p">);</span>
 <span class="p">}</span>

</code></pre></div>    </div>
  </li>
</ol>

<h4 id="æ–¹å—è¯­æ³•">æ–¹å—è¯­æ³•</h4>

<ol>
  <li>
    <p>å®ç°ä¸€ä¸ªæ–¹æ³•</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="err">#</span><span class="p">[</span><span class="nf">derive</span><span class="p">(</span><span class="n">Debug</span><span class="p">)]</span>
 <span class="k">struct</span> <span class="n">Rectangle</span> <span class="p">{</span>
     <span class="n">width</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
     <span class="n">height</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
 <span class="p">}</span>

 <span class="c">// å®ç° å¯ä»¥æœ‰å¤šä¸ªå®ç°</span>
 <span class="k">impl</span> <span class="n">Rectangle</span> <span class="p">{</span>
     <span class="c">// è¿™é‡Œçš„selféƒ½åªæ˜¯å€Ÿæ¥çš„ åªåšè®¿é—®å˜é‡ä½¿ç”¨</span>
     <span class="c">// ä½†å¦‚æœè¦ç”¨æ¥ä¿®æ”¹å…¶å†…å®¹çš„è¯ ä¹Ÿæ˜¯éœ€è¦åŠ ä¸Šmut</span>
     <span class="k">fn</span> <span class="nf">area</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span>
         <span class="k">self</span><span class="py">.width</span> <span class="o">*</span> <span class="k">self</span><span class="py">.height</span>
     <span class="p">}</span>
 <span class="p">}</span>

 <span class="k">impl</span> <span class="n">Rectangle</span> <span class="p">{</span>
     <span class="c">// å¯ä»¥ç†è§£ä¸ºå®šä¹‰äº†ä¸€ä¸ª ç±»å‡½æ•° åªèƒ½é€šè¿‡ç±»æ¥è°ƒç”¨ è°ƒç”¨æ–¹å¼ é‡‡ç”¨ :: åŒå†’å·å½¢å¼</span>
     <span class="k">fn</span> <span class="nf">square</span><span class="p">(</span><span class="n">size</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Rectangle</span> <span class="p">{</span>
         <span class="n">Rectangle</span> <span class="p">{</span> <span class="n">width</span><span class="p">:</span> <span class="n">size</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="n">size</span> <span class="p">}</span>
     <span class="p">}</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">rect1</span> <span class="o">=</span> <span class="n">Rectangle</span> <span class="p">{</span> <span class="n">width</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">50</span> <span class="p">};</span>

     <span class="nd">println!</span><span class="p">(</span>
         <span class="s">"The area of the rectangle is {} square pixels."</span><span class="p">,</span>
         <span class="n">rect1</span><span class="nf">.area</span><span class="p">()</span>
     <span class="p">);</span>

     <span class="k">let</span> <span class="n">sq</span> <span class="o">=</span> <span class="nn">Rectangle</span><span class="p">::</span><span class="nf">square</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
 <span class="p">}</span>

</code></pre></div>    </div>
  </li>
  <li>
    <p>è‡ªåŠ¨ä¿®æ”¹è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹, ä»…ä»…é’ˆå¯¹ <code class="highlighter-rouge">self</code> å‚æ•°   ä¼šè‡ªåŠ¨æ·»åŠ ä»–çš„å˜ä½“ <code class="highlighter-rouge">&amp;</code>ï¼Œ<code class="highlighter-rouge">&amp;mut</code> æˆ– <code class="highlighter-rouge">*</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="err">#</span><span class="o">!</span><span class="p">[</span><span class="nf">allow</span><span class="p">(</span><span class="n">unused_variables</span><span class="p">)]</span>
 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="nd">#[derive(Debug,Copy,Clone)]</span>
     <span class="k">struct</span> <span class="n">Point</span> <span class="p">{</span>
         <span class="n">x</span><span class="p">:</span> <span class="nb">f64</span><span class="p">,</span>
         <span class="n">y</span><span class="p">:</span> <span class="nb">f64</span><span class="p">,</span>
     <span class="p">}</span>

     <span class="k">impl</span> <span class="n">Point</span> <span class="p">{</span>
         <span class="k">fn</span> <span class="nf">distance</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">Point</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f64</span> <span class="p">{</span>
             <span class="k">let</span> <span class="n">x_squared</span> <span class="o">=</span> <span class="nn">f64</span><span class="p">::</span><span class="nf">powi</span><span class="p">(</span><span class="n">other</span><span class="py">.x</span> <span class="err">-</span> <span class="k">self</span><span class="py">.x</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
             <span class="k">let</span> <span class="n">y_squared</span> <span class="o">=</span> <span class="nn">f64</span><span class="p">::</span><span class="nf">powi</span><span class="p">(</span><span class="n">other</span><span class="py">.y</span> <span class="err">-</span> <span class="k">self</span><span class="py">.y</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

             <span class="nn">f64</span><span class="p">::</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">x_squared</span> <span class="o">+</span> <span class="n">y_squared</span><span class="p">)</span>
         <span class="p">}</span>
     <span class="p">}</span>
     <span class="k">let</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">Point</span> <span class="p">{</span> <span class="n">x</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mf">0.0</span> <span class="p">};</span>
     <span class="k">let</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">Point</span> <span class="p">{</span> <span class="n">x</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mf">6.5</span> <span class="p">};</span>
     <span class="c">// è¿™ä¸¤ä¸ªæ–¹æ³•çš„è°ƒç”¨æ—¶ä¸€æ— æ‰€è°“çš„</span>
     <span class="n">p1</span><span class="nf">.distance</span><span class="p">(</span><span class="o">&amp;</span><span class="n">p2</span><span class="p">);</span>
     <span class="p">(</span><span class="o">&amp;</span><span class="n">p1</span><span class="p">)</span><span class="nf">.distance</span><span class="p">(</span><span class="o">&amp;</span><span class="n">p2</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="æšä¸¾">æšä¸¾</h4>

<ol>
  <li>
    <p>ä¸å¾—ä¸æ‰¿è®¤ è¿™ä¹ˆæ²¡æœ‰å¾ˆå¸å¼•æˆ‘</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// æ­£å¸¸ä½¿ç”¨</span>
 <span class="k">enum</span> <span class="n">IpAddrKind</span> <span class="p">{</span>
     <span class="n">V4</span><span class="p">,</span>
     <span class="n">V6</span><span class="p">,</span>
 <span class="p">}</span>
 <span class="c">// æ··ç”¨</span>
 <span class="k">enum</span> <span class="n">IpAddr</span> <span class="p">{</span>
     <span class="nf">V4</span><span class="p">(</span><span class="nb">u8</span><span class="p">,</span> <span class="nb">u8</span><span class="p">,</span> <span class="nb">u8</span><span class="p">,</span> <span class="nb">u8</span><span class="p">),</span>
     <span class="nf">V6</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
 <span class="p">}</span>

 <span class="k">struct</span> <span class="n">Ipv4Addr</span> <span class="p">{</span>
 <span class="c">// --snip--</span>
 <span class="p">}</span>

 <span class="k">struct</span> <span class="n">Ipv6Addr</span> <span class="p">{</span>
     <span class="c">// --snip--</span>
 <span class="p">}</span>

 <span class="c">// ç»“æ„ä½“ä½¿ç”¨</span>
 <span class="k">enum</span> <span class="n">IpAddr</span> <span class="p">{</span>
     <span class="nf">V4</span><span class="p">(</span><span class="n">Ipv4Addr</span><span class="p">),</span>
     <span class="nf">V6</span><span class="p">(</span><span class="n">Ipv6Addr</span><span class="p">),</span>
 <span class="p">}</span>

 <span class="c">// å¼ºå¤§æ‰€åœ¨</span>
 <span class="k">enum</span> <span class="n">Message</span> <span class="p">{</span>
     <span class="n">Quit</span><span class="p">,</span>
     <span class="n">Move</span> <span class="p">{</span> <span class="n">x</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">i32</span> <span class="p">},</span>
     <span class="nf">Write</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
     <span class="nf">ChangeColor</span><span class="p">(</span><span class="nb">i32</span><span class="p">,</span> <span class="nb">i32</span><span class="p">,</span> <span class="nb">i32</span><span class="p">),</span>
 <span class="p">}</span>

 <span class="k">impl</span> <span class="n">Message</span> <span class="p">{</span>
     <span class="c">// è¿˜èƒ½...å®ç° å‡½æ•°!!!</span>
     <span class="k">fn</span> <span class="nf">call</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span>
         <span class="c">// method body would be defined here</span>
     <span class="p">}</span>
 <span class="p">}</span>

</code></pre></div>    </div>
  </li>
  <li>
    <p>Option
 nullçš„å‘æ˜è€…Tony Hoareåœ¨2009å¹´çš„æ¼”è®²â€œ Null Referencesï¼šåäº¿ç¾å…ƒçš„é”™è¯¯â€ä¸­è¯´ï¼š</p>

    <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     æˆ‘ç§°ä¹‹ä¸ºæˆ‘çš„åäº¿ç¾å…ƒé”™è¯¯ã€‚å½“æ—¶ï¼Œæˆ‘æ­£åœ¨è®¾è®¡ç¬¬ä¸€ä¸ªå…¨é¢çš„ç±»å‹ç³»ç»Ÿï¼Œä»¥ä½¿ç”¨é¢å‘å¯¹è±¡çš„è¯­è¨€è¿›è¡Œå¼•ç”¨ã€‚æˆ‘çš„ç›®æ ‡æ˜¯ç¡®ä¿æ‰€æœ‰å¼•ç”¨çš„ä½¿ç”¨éƒ½ç»å¯¹å®‰å…¨ï¼Œå¹¶ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ‰§è¡Œæ£€æŸ¥ã€‚ä½†æ˜¯æˆ‘å¿ä¸ä½è¦æ’å…¥ä¸€ä¸ªç©ºå¼•ç”¨çš„è¯±æƒ‘ï¼Œä»…ä»…æ˜¯å› ä¸ºå®ƒæ˜¯å¦‚æ­¤å®¹æ˜“å®ç°ã€‚è¿™å¯¼è‡´äº†æ— æ•°é”™è¯¯ï¼Œæ¼æ´å’Œç³»ç»Ÿå´©æºƒï¼Œåœ¨æœ€è¿‘å››åå¹´ä¸­å¯èƒ½é€ æˆåäº¿ç¾å…ƒçš„ç—›è‹¦å’Œç ´åã€‚
</code></pre></div>    </div>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">enum</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="nf">Some</span><span class="p">(</span><span class="n">T</span><span class="p">),</span>    <span class="c">// æ³›å‹</span>
     <span class="nb">None</span><span class="p">,</span>
 <span class="p">}</span>
 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">some_number</span> <span class="o">=</span> <span class="nf">Some</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
     <span class="k">let</span> <span class="n">some_string</span> <span class="o">=</span> <span class="nf">Some</span><span class="p">(</span><span class="s">"a string"</span><span class="p">);</span>     <span class="c">// Some ç›´æ¥èµ‹å€¼å³å¯æ¨æµ‹ç±»å‹äº†</span>
     <span class="k">let</span> <span class="n">absent_number</span><span class="p">:</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">None</span><span class="p">;</span>  <span class="c">// None æ²¡æœ‰ç±»å‹ é‚£ä¹ˆå°±éœ€è¦æŒ‡ä»£ç±»å‹</span>
 <span class="p">}</span>
</code></pre></div>    </div>

    <p>åŠ å…¥Option æ—¨åœ¨é™åˆ¶nullçš„æ™®éæ€§å¹¶æé«˜Rustä»£ç çš„å®‰å…¨æ€§ã€‚</p>
  </li>
  <li>
    <p>åŒ¹é…æ§åˆ¶æµ <code class="highlighter-rouge">match</code></p>

    <p>ä¸€ä¸ªå¼ºå¤§çš„æ­¦å™¨</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">enum</span> <span class="n">UsState</span> <span class="p">{</span>
     <span class="n">Alabama</span><span class="p">,</span>
     <span class="n">Alaska</span><span class="p">,</span>
     <span class="c">// --snip--</span>
 <span class="p">}</span>

 <span class="k">enum</span> <span class="n">Coin</span> <span class="p">{</span>
     <span class="n">Penny</span><span class="p">,</span>      <span class="c">// 1 ç¾åˆ†</span>
     <span class="n">Nickel</span><span class="p">,</span>     <span class="c">// 5 ç¾åˆ†</span>
     <span class="n">Dime</span><span class="p">,</span>       <span class="c">// 10 ç¾åˆ†</span>
     <span class="nf">Quarter</span><span class="p">(</span><span class="n">UsState</span><span class="p">),</span>    <span class="c">// 25 ç¾åˆ†</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">value_in_cents</span><span class="p">(</span><span class="n">coin</span><span class="p">:</span> <span class="n">Coin</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u8</span> <span class="p">{</span>
     <span class="k">match</span> <span class="n">coin</span> <span class="p">{</span>
         <span class="c">// ç±»å‡½æ•°çš„è°ƒç”¨æ–¹å¼ æŒ‡å®š æšä¸¾çš„æ¯ä¸ªå€¼</span>
         <span class="nn">Coin</span><span class="p">::</span><span class="n">Penny</span> <span class="k">=&gt;</span> <span class="p">{</span>    <span class="c">// =&gt; åŒ¹é…åç›´æ¥èµ‹å€¼çš„æ„æ€</span>
             <span class="nd">println!</span><span class="p">(</span><span class="s">"Lucky penny!"</span><span class="p">);</span>
             <span class="mi">1</span>   <span class="c">// è¿”å›å€¼ä¸º1</span>
         <span class="p">},</span>
         <span class="nn">Coin</span><span class="p">::</span><span class="n">Nickel</span> <span class="k">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
         <span class="nn">Coin</span><span class="p">::</span><span class="n">Dime</span> <span class="k">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
         <span class="nn">Coin</span><span class="p">::</span><span class="nf">Quarter</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">{</span>
             <span class="nd">println!</span><span class="p">(</span><span class="s">"State quarter from {:?}!"</span><span class="p">,</span> <span class="n">state</span><span class="p">);</span>
             <span class="mi">25</span>
         <span class="p">},</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">match</code> æ­é… <code class="highlighter-rouge">Option&lt;T&gt;</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">plus_one</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="k">match</span> <span class="n">x</span> <span class="p">{</span>
         <span class="nb">None</span> <span class="k">=&gt;</span> <span class="nb">None</span><span class="p">,</span>
         <span class="nf">Some</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nf">Some</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
     <span class="p">}</span>
 <span class="p">}</span>

 <span class="k">let</span> <span class="n">five</span> <span class="o">=</span> <span class="nf">Some</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">six</span> <span class="o">=</span> <span class="nf">plus_one</span><span class="p">(</span><span class="n">five</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">none</span> <span class="o">=</span> <span class="nf">plus_one</span><span class="p">(</span><span class="nb">None</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">_</code> å ä½ç¬¦ ç±»ä¼¼äº <code class="highlighter-rouge">default</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="n">some_u8_value</span> <span class="o">=</span> <span class="mi">0u8</span><span class="p">;</span> <span class="c">// ç­‰ä»·äº  let some_u8_value : u8 = 1; </span>
 <span class="k">match</span> <span class="n">some_u8_value</span> <span class="p">{</span>
     <span class="mi">1</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"one"</span><span class="p">),</span>
     <span class="mi">3</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"three"</span><span class="p">),</span>
     <span class="mi">5</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"five"</span><span class="p">),</span>
     <span class="mi">7</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"seven"</span><span class="p">),</span>
     <span class="n">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å°±ç®—ä½¿ç”¨äº†å ä½ç¬¦ ä½†å¦‚æœæˆ‘ä»¬åªè¦åŒ¹é…ä¸€ç§æ¨¡å¼çš„è¯ ç”¨<code class="highlighter-rouge">match</code>æœ‰ç‚¹ç„‰ç”¨ç‰›åˆ€çš„æ„Ÿè§‰äº† æ‰€ä»¥å¼•å…¥äº† <code class="highlighter-rouge">if let</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// ç‰›åˆ€æ¨¡å¼</span>
 <span class="k">let</span> <span class="n">some_u8_value</span> <span class="o">=</span> <span class="nf">Some</span><span class="p">(</span><span class="mi">0u8</span><span class="p">);</span>
 <span class="k">match</span> <span class="n">some_u8_value</span> <span class="p">{</span>
     <span class="nf">Some</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"three"</span><span class="p">),</span>
     <span class="n">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
 <span class="p">}</span>
 <span class="c">// ç®€çº¦æ¨¡å¼</span>
 <span class="k">if</span> <span class="k">let</span> <span class="nf">Some</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="n">some_u8_value</span> <span class="p">{</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"three"</span><span class="p">);</span>
 <span class="p">}</span>

</code></pre></div>    </div>

    <p>æ¢å¥è¯è¯´ï¼Œæ‚¨å¯ä»¥å°†å…¶<code class="highlighter-rouge">if let</code>è§†ä¸º<code class="highlighter-rouge">match</code>å½“å€¼åŒ¹é…ä¸€ä¸ªæ¨¡å¼ç„¶åå¿½ç•¥æ‰€æœ‰å…¶ä»–å€¼æ—¶è¿è¡Œä»£ç çš„è¯­æ³•è¯­æ³•ã€‚</p>
  </li>
</ol>

<h3 id="ä½¿ç”¨åŒ…å¤´æ–‡ä»¶">ä½¿ç”¨åŒ…(å¤´æ–‡ä»¶)</h3>

<h4 id="åŒ…">åŒ…</h4>

<ol>
  <li>åœ¨ä½¿ç”¨<code class="highlighter-rouge">cargo</code>çš„æ—¶å€™, ç”Ÿæˆå‡ºæ¥çš„ <code class="highlighter-rouge">src</code> å…¶å®å°±æ˜¯ä¸€ä¸ªåŒ…</li>
</ol>

<h4 id="æ¨¡å—-mod">æ¨¡å— <code class="highlighter-rouge">mod</code></h4>

<ol>
  <li>
    <p>æ ·æ¿</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">mod</span> <span class="n">front_of_house</span> <span class="p">{</span>
     <span class="c">// å¦‚æœè¿™é‡Œä¸æ·»åŠ  pub çš„è¯ æ˜¯æ²¡æœ‰åŠæ³•åœ¨å¤–éƒ¨ä½¿ç”¨çš„</span>
     <span class="k">pub</span> <span class="k">mod</span> <span class="n">hosting</span> <span class="p">{</span>
         <span class="k">pub</span> <span class="k">fn</span> <span class="nf">add_to_waitlist</span><span class="p">()</span> <span class="p">{}</span>
         <span class="k">fn</span> <span class="nf">seat_at_table</span><span class="p">()</span> <span class="p">{}</span>
     <span class="p">}</span>

     <span class="k">mod</span> <span class="n">serving</span> <span class="p">{</span>
         <span class="k">fn</span> <span class="nf">take_order</span><span class="p">()</span> <span class="p">{}</span>
         <span class="k">fn</span> <span class="nf">serve_order</span><span class="p">()</span> <span class="p">{}</span>
         <span class="k">fn</span> <span class="nf">take_payment</span><span class="p">()</span> <span class="p">{}</span>
     <span class="p">}</span>
 <span class="p">}</span>


 <span class="k">pub</span> <span class="k">fn</span> <span class="nf">eat_at_restaurant</span><span class="p">()</span> <span class="p">{</span>
     <span class="c">// ç»å¯¹è·¯å¾„è°ƒç”¨çš„æ—¶å€™ é‡‡ç”¨çš„å…³é”®å­—æ˜¯ crate ç®±å­ å…¶å®å¯ä»¥ç†è§£ä¸ºå½“å‰ç›®å½• root</span>
     <span class="nn">crate</span><span class="p">::</span><span class="nn">front_of_house</span><span class="p">::</span><span class="nn">hosting</span><span class="p">::</span><span class="nf">add_to_waitlist</span><span class="p">();</span>

     <span class="c">// ç›¸å¯¹è·¯å¾„è°ƒç”¨çš„æ—¶å€™å¯ä»¥çœç•¥</span>
     <span class="nn">front_of_house</span><span class="p">::</span><span class="nn">hosting</span><span class="p">::</span><span class="nf">add_to_waitlist</span><span class="p">();</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ¨¡å—æ ‘</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">crate</span>
 <span class="err">â””â”€â”€</span> <span class="n">front_of_house</span>
     <span class="err">â”œâ”€â”€</span> <span class="n">hosting</span>
     <span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="n">add_to_waitlist</span>
     <span class="err">â”‚</span>   <span class="err">â””â”€â”€</span> <span class="n">seat_at_table</span>
     <span class="err">â””â”€â”€</span> <span class="n">serving</span>
         <span class="err">â”œâ”€â”€</span> <span class="n">take_order</span>
         <span class="err">â”œâ”€â”€</span> <span class="n">serve_order</span>
         <span class="err">â””â”€â”€</span> <span class="n">take_payment</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>èµ·å§‹ç›¸å¯¹è·¯å¾„ <code class="highlighter-rouge">super</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">serve_order</span><span class="p">()</span> <span class="p">{}</span>

 <span class="k">mod</span> <span class="n">back_of_house</span> <span class="p">{</span>
     <span class="k">fn</span> <span class="nf">fix_incorrect_order</span><span class="p">()</span> <span class="p">{</span>
         <span class="nf">cook_order</span><span class="p">();</span>
         <span class="c">// è¿™é‡Œçš„superæ„æ€å°±æ˜¯ back_of_house è€Œä¸” serve_order å’Œ super åŒçº§</span>
         <span class="nn">super</span><span class="p">::</span><span class="nf">serve_order</span><span class="p">();</span>
     <span class="p">}</span>

     <span class="k">fn</span> <span class="nf">cook_order</span><span class="p">()</span> <span class="p">{}</span>
 <span class="p">}</span>
 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{}</span>

</code></pre></div>    </div>
  </li>
</ol>

<h4 id="ä½¿ç”¨-use-æ¥å¼•å…¥è·¯å¾„-ç¼©çŸ­è·¯å¾„">ä½¿ç”¨ <code class="highlighter-rouge">use</code> æ¥å¼•å…¥è·¯å¾„ ç¼©çŸ­è·¯å¾„</h4>

<ol>
  <li>
    <p>æ­£å¸¸ä½¿ç”¨</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">mod</span> <span class="n">front_of_house</span> <span class="p">{</span>
     <span class="k">pub</span> <span class="k">mod</span> <span class="n">hosting</span> <span class="p">{</span>
         <span class="k">pub</span> <span class="k">fn</span> <span class="nf">add_to_waitlist</span><span class="p">()</span> <span class="p">{}</span>
     <span class="p">}</span>
 <span class="p">}</span>

 <span class="k">use</span> <span class="nn">crate</span><span class="p">::</span><span class="nn">front_of_house</span><span class="p">::</span><span class="n">hosting</span><span class="p">;</span>

 <span class="k">pub</span> <span class="k">fn</span> <span class="nf">eat_at_restaurant</span><span class="p">()</span> <span class="p">{</span>
     <span class="c">// ç»å¯¹è·¯å¾„ä¸‹</span>
     <span class="nn">crate</span><span class="p">::</span><span class="nn">front_of_house</span><span class="p">::</span><span class="nn">hosting</span><span class="p">::</span><span class="nf">add_to_waitlist</span><span class="p">();</span>
     <span class="c">// ç›¸å¯¹è·¯å¾„ä¸‹</span>
     <span class="nn">front_of_house</span><span class="p">::</span><span class="nn">hosting</span><span class="p">::</span><span class="nf">add_to_waitlist</span><span class="p">();</span>
     <span class="c">// è¢«ç¼©çŸ­çš„ä½¿ç”¨æ–¹å¼</span>
     <span class="nn">hosting</span><span class="p">::</span><span class="nf">add_to_waitlist</span><span class="p">();</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">as</code> æ¥é‡å†™å‘½å</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fmt</span><span class="p">::</span><span class="n">Result</span><span class="p">;</span>
     <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">Result</span> <span class="k">as</span> <span class="n">IoResult</span><span class="p">;</span>

     <span class="k">fn</span> <span class="nf">function1</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span> <span class="p">{</span>
         <span class="c">// --snip--</span>
         <span class="nf">Ok</span><span class="p">(())</span>
     <span class="p">}</span>

     <span class="k">fn</span> <span class="nf">function2</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">IoResult</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span> <span class="p">{</span>
         <span class="c">// --snip--</span>
         <span class="nf">Ok</span><span class="p">(())</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å¯¼å‡º <code class="highlighter-rouge">pub use</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">mod</span> <span class="n">front_of_house</span> <span class="p">{</span>
     <span class="k">pub</span> <span class="k">mod</span> <span class="n">hosting</span> <span class="p">{</span>
         <span class="k">pub</span> <span class="k">fn</span> <span class="nf">add_to_waitlist</span><span class="p">()</span> <span class="p">{}</span>
     <span class="p">}</span>
 <span class="p">}</span>
 <span class="c">// å¤–éƒ¨è®¿é—®å¯ä»¥ç›´æ¥è®¿é—® hosting::add_to_waitlist()</span>
 <span class="k">pub</span> <span class="k">use</span> <span class="nn">crate</span><span class="p">::</span><span class="nn">front_of_house</span><span class="p">::</span><span class="n">hosting</span><span class="p">;</span>

 <span class="k">pub</span> <span class="k">fn</span> <span class="nf">eat_at_restaurant</span><span class="p">()</span> <span class="p">{</span>
     <span class="nn">hosting</span><span class="p">::</span><span class="nf">add_to_waitlist</span><span class="p">();</span>
     <span class="nn">hosting</span><span class="p">::</span><span class="nf">add_to_waitlist</span><span class="p">();</span>
     <span class="nn">hosting</span><span class="p">::</span><span class="nf">add_to_waitlist</span><span class="p">();</span>
 <span class="p">}</span>
 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{}</span>

</code></pre></div>    </div>
  </li>
  <li>
    <p>å¯¹äºåŒä¸€åŒ…ä¸‹çš„å¤šä¸ªè·¯å¾„ä½¿ç”¨åµŒå¥—å¤„ç† <code class="highlighter-rouge">{ , }</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">Write</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">cmp</span><span class="p">::</span><span class="n">Ordering</span><span class="p">;</span>

 <span class="k">use</span> <span class="nn">std</span><span class="p">::{</span><span class="nn">cmp</span><span class="p">::</span><span class="n">Ordering</span><span class="p">,</span> <span class="n">io</span><span class="p">};</span>
 <span class="c">// å¯¹äºè·¯å¾„æœ¬èº« ä½¿ç”¨ self</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::{</span><span class="k">self</span><span class="p">,</span> <span class="n">Write</span><span class="p">};</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å¯¼å…¥æ‰€æœ‰çš„å…¬å…±é¡¹ç›®</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="o">*</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ¨¡å— <code class="highlighter-rouge">mod</code> åˆ†æ–‡ä»¶å­˜æ”¾</p>

    <p>è¿™ä¸ªä¸éœ€è¦å¤ªå¤šçš„å†…å®¹å»å†™ å¤§æ¦‚å°±æ˜¯å’Œå®‰å“çš„æœºåˆ¶ç±»ä¼¼ æ–‡ä»¶å¤¹å­˜æ”¾å³å¯</p>
  </li>
</ol>

<h3 id="å¸¸ç”¨çš„ä¸€äº›é”®å€¼ä¿å­˜çš„ä¸œè¥¿">å¸¸ç”¨çš„ä¸€äº›é”®å€¼ä¿å­˜çš„ä¸œè¥¿</h3>

<h4 id="çŸ¢é‡">çŸ¢é‡</h4>

<ol>
  <li>
    <p>çŸ¢é‡ <code class="highlighter-rouge">Vec</code> å¯ä»¥å­˜æ”¾ä»»ä½•ç±»å‹, ä½†ä»…é™äºåŒä¸€ç±»å‹çš„, æ‰€ä»¥å¯ä»¥å€ŸåŠ© <code class="highlighter-rouge">enum</code> æ¥è¾¾åˆ°æ··å­˜çš„åŠŸèƒ½</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="n">v</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nn">Vec</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
 <span class="n">v</span><span class="nf">.push</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
 <span class="n">v</span><span class="nf">.push</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">v</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>

 <span class="k">enum</span> <span class="n">SpreadsheetCell</span> <span class="p">{</span>
     <span class="nf">Int</span><span class="p">(</span><span class="nb">i32</span><span class="p">),</span>
     <span class="nf">Float</span><span class="p">(</span><span class="nb">f64</span><span class="p">),</span>
     <span class="nf">Text</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
 <span class="p">}</span>

 <span class="k">let</span> <span class="n">row</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span>
     <span class="nn">SpreadsheetCell</span><span class="p">::</span><span class="nf">Int</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
     <span class="nn">SpreadsheetCell</span><span class="p">::</span><span class="nf">Text</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"blue"</span><span class="p">)),</span>
     <span class="nn">SpreadsheetCell</span><span class="p">::</span><span class="nf">Float</span><span class="p">(</span><span class="mf">10.12</span><span class="p">),</span>
 <span class="p">];</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å¦‚æœå·²ç»ç”Ÿæˆè¿‡äº†ä¸ª ä¸å¯å˜ çš„å¼•ç”¨ä¹‹å, å†ç»§ç»­å¯¹å…¶push</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="k">mut</span> <span class="n">v</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
 <span class="k">let</span> <span class="n">first</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>  <span class="c">// äº§ç”Ÿä¸å¯å˜çš„å¼•ç”¨ä¹‹å</span>
 <span class="n">v</span><span class="nf">.push</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>          <span class="c">// è¿™é‡Œä¼šç”Ÿæˆ å¯å˜</span>
 <span class="nd">println!</span><span class="p">(</span><span class="s">"The first element is: {}"</span><span class="p">,</span> <span class="n">first</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å¯ä»¥ç›´æ¥å¯¹å…¶éå†</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="n">v</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">57</span><span class="p">];</span>
 <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="o">&amp;</span><span class="n">v</span> <span class="p">{</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
 <span class="p">}</span>
 <span class="c">// å¦‚æœè¦æ”¹å€¼å¾—è¯ éœ€è¦åŠ  mut</span>
 <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="n">v</span> <span class="p">{</span>
     <span class="c">// ç”šè‡³æ˜¯ç›´æ¥éå†çš„æ—¶å€™æ›´æ”¹ä»–çš„å€¼</span>
     <span class="o">*</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">50</span><span class="p">;</span> <span class="c">// * æœ‰ç‚¹å¼ºä¹°å¼ºå–çš„é—®é“</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="string">String</h4>

<ol>
  <li>
    <p>ä¸èƒ½å¯¹ <code class="highlighter-rouge">String</code> ç´¢å¼•</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="n">hello</span> <span class="o">=</span> <span class="s">"Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ"</span><span class="p">;</span>
 <span class="k">let</span> <span class="n">answer</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">hello</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="c">// å› ä¸ºUnicodeå—çš„å­—èŠ‚é•¿åº¦æ˜¯ä¸å®šçš„</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å­—ç¬¦ä¸²çš„ä¸€äº›ç›¸å…³æ“ä½œ</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// è¿½åŠ </span>
 <span class="k">let</span> <span class="k">mut</span> <span class="n">s1</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">s2</span> <span class="o">=</span> <span class="s">"bar"</span><span class="p">;</span>
 <span class="n">s1</span><span class="nf">.push_str</span><span class="p">(</span><span class="n">s2</span><span class="p">);</span> <span class="c">// è¿™é‡Œå¹¶ä¸ä¼šè½¬è®©æ‰€æœ‰æƒ</span>
 <span class="nd">println!</span><span class="p">(</span><span class="s">"s2 is {}"</span><span class="p">,</span> <span class="n">s2</span><span class="p">);</span>

 <span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"lo"</span><span class="p">);</span>
 <span class="n">s</span><span class="nf">.push</span><span class="p">(</span><span class="sc">'l'</span><span class="p">);</span>

 <span class="c">// åˆå¹¶</span>
 <span class="c">// åŠ å·</span>
 <span class="k">let</span> <span class="n">s1</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Hello, "</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">s2</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"world!"</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">s3</span> <span class="o">=</span> <span class="n">s1</span> <span class="o">+</span> <span class="o">&amp;</span><span class="n">s2</span><span class="p">;</span> <span class="c">// s1 çš„æ‰€æœ‰æƒè¢«ç§»äº¤å‡ºå»äº† + å·å…¶å®è°ƒç”¨çš„æ˜¯ add æ–¹æ³•</span>

 <span class="c">// æ ¼å¼åŒ–</span>
 <span class="k">let</span> <span class="n">s1</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"tic"</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">s2</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"tac"</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">s3</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"toe"</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="nd">format!</span><span class="p">(</span><span class="s">"{}-{}-{}"</span><span class="p">,</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ä½†å¯ä»¥å¯¹å­—ç¬¦ä¸²åšèŒƒå›´åˆ‡ç‰‡ ä½†æ˜¯ä¼šå¯èƒ½æŠ¥é”™</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="n">hello</span> <span class="o">=</span> <span class="s">"Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ"</span><span class="p">;</span> <span class="c">// è¿™é‡Œçš„ä¸€ä¸ªå­—ç¬¦å ä¸¤ä¸ªå­—èŠ‚</span>
 <span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">hello</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">4</span><span class="p">];</span>       <span class="c">// æ‰€ä»¥ 0åˆ°4 å–å‡ºæ¥çš„æ˜¯ 'Ğ—Ğ´'</span>
 <span class="c">// ä¸€æ—¦å–äº† [0..1] æˆ–è€…æ˜¯ [0..3] å°±ä¼šå¯¼è‡´å­—ç¬¦æ— æ³•è¢«æ­£å¸¸åˆ‡å‡ºæ¥ ä¼šæŠ¥é”™</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>éå†å­—ç¬¦ä¸²çš„çœŸæ­£å­—ç¬¦ ä½¿ç”¨ <code class="highlighter-rouge">chars</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">for</span> <span class="n">c</span> <span class="n">in</span> <span class="s">"à¤¨à¤®à¤¸à¥à¤¤à¥‡"</span><span class="nf">.chars</span><span class="p">()</span> <span class="p">{</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æˆ–è€…éå†å­—ç¬¦ä¸²çš„å­—èŠ‚ç  ä½¿ç”¨ <code class="highlighter-rouge">bytes</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">for</span> <span class="n">b</span> <span class="n">in</span> <span class="s">"à¤¨à¤®à¤¸à¥à¤¤à¥‡"</span><span class="nf">.bytes</span><span class="p">()</span> <span class="p">{</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="hashmap">HashMap</h4>

<ol>
  <li>
    <p>æ‰€æœ‰çš„é”®å€¼å¿…é¡»ä¸€è‡´, ä¹Ÿå°±æ˜¯é”®çš„ç±»å‹è¦ä¸€è‡´, å€¼çš„ç±»å‹ä¹Ÿè¦ä¸€è‡´</p>
  </li>
  <li>
    <p>ä½¿ç”¨</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>

 <span class="k">let</span> <span class="k">mut</span> <span class="n">scores</span> <span class="o">=</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
 <span class="c">// ä¸€ä¸ªä¸€ä¸ªæ’å…¥</span>
 <span class="n">scores</span><span class="nf">.insert</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Blue"</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
 <span class="n">scores</span><span class="nf">.insert</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Yellow"</span><span class="p">),</span> <span class="mi">50</span><span class="p">);</span>

 <span class="c">// å…ˆåˆ›å»ºæ‰€æœ‰çš„é”® å’Œ å€¼ å­˜æ”¾åˆ° vecå½“ä¸­</span>
 <span class="k">let</span> <span class="n">teams</span>  <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Blue"</span><span class="p">),</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Yellow"</span><span class="p">)];</span>
 <span class="k">let</span> <span class="n">initial_scores</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">];</span>

 <span class="c">// è¿™é‡Œçš„ ä¸‹åˆ’çº¿æ˜¯å¯ä»¥ç¼–è¯‘å™¨ è‡ªå·±å»çŒœæµ‹çš„</span>
 <span class="k">let</span> <span class="n">scores</span><span class="p">:</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">teams</span><span class="nf">.iter</span><span class="p">()</span><span class="nf">.zip</span><span class="p">(</span><span class="n">initial_scores</span><span class="nf">.iter</span><span class="p">())</span><span class="nf">.collect</span><span class="p">();</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ä¼šæ¥æ”¶æ‰€æœ‰æƒ</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="n">field_name</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Favorite color"</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">field_value</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Blue"</span><span class="p">);</span>

 <span class="k">let</span> <span class="k">mut</span> <span class="n">map</span> <span class="o">=</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
 <span class="n">map</span><span class="nf">.insert</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_value</span><span class="p">);</span>
 <span class="c">// ä¸‹é¢è¿™è¡Œä»£ç ä¼šæŠ¥é”™çš„ æ‰€æœ‰æƒå¤±æ•ˆäº†</span>
 <span class="nd">println!</span><span class="p">(</span><span class="s">"{}, {}"</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_value</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>è·å–å€¼ <code class="highlighter-rouge">get</code> è¿”å›çš„æ˜¯ä¸ª <code class="highlighter-rouge">Option</code> å€¼ å› ä¸ºæ˜¯æœ‰å¯èƒ½ä¸º <code class="highlighter-rouge">None</code>çš„</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">scores</span><span class="nf">.insert</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Blue"</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
 <span class="n">scores</span><span class="nf">.insert</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Yellow"</span><span class="p">),</span> <span class="mi">50</span><span class="p">);</span>

 <span class="k">let</span> <span class="n">team_name</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Blue"</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">score</span> <span class="o">=</span> <span class="n">scores</span><span class="nf">.get</span><span class="p">(</span><span class="o">&amp;</span><span class="n">team_name</span><span class="p">);</span>
 <span class="c">// score =&gt; Some(10)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ä»…å½“é”®æ²¡æœ‰å€¼æ—¶æ‰æ’å…¥å€¼ <code class="highlighter-rouge">entry</code> <code class="highlighter-rouge">or_insert</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="k">mut</span> <span class="n">scores</span> <span class="o">=</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
 <span class="n">scores</span><span class="nf">.insert</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Blue"</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>

 <span class="n">scores</span><span class="nf">.entry</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Yellow"</span><span class="p">))</span><span class="nf">.or_insert</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
 <span class="n">scores</span><span class="nf">.entry</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Blue"</span><span class="p">))</span><span class="nf">.or_insert</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>   <span class="c">// è¿™é‡Œä¸ä¼šç”Ÿæ•ˆ</span>

 <span class="nd">println!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span> <span class="n">scores</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ›´æ–°å€¼ ä½†è¿™é‡Œæ„Ÿè§‰æœ‰ç‚¹é—®é¢˜</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="n">text</span> <span class="o">=</span> <span class="s">"hello world wonderful world"</span><span class="p">;</span>

 <span class="k">let</span> <span class="k">mut</span> <span class="n">map</span> <span class="o">=</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>

 <span class="k">for</span> <span class="n">word</span> <span class="n">in</span> <span class="n">text</span><span class="nf">.split_whitespace</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">count</span> <span class="o">=</span> <span class="n">map</span><span class="nf">.entry</span><span class="p">(</span><span class="n">word</span><span class="p">)</span><span class="nf">.or_insert</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
     <span class="o">*</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span> <span class="c">// åœ¨è¿™é‡Œæ›´æ–°äº† ä½†æ˜¯å°±æ€ä¹ˆé‚£ä¹ˆæ€ªå‘¢</span>
 <span class="p">}</span>

 <span class="nd">println!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span> <span class="n">map</span><span class="p">);</span>


 <span class="c">// å¦‚æœæŒ‰ç…§ä¸Šè¿°è¿™ä¸ªæ€è·¯çš„è¯</span>
 <span class="k">let</span> <span class="n">score</span> <span class="o">=</span> <span class="n">scores</span><span class="nf">.entry</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Blue"</span><span class="p">))</span><span class="nf">.or_insert</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
 <span class="o">*</span><span class="n">score</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="æŠ¥é”™-panic">æŠ¥é”™ <code class="highlighter-rouge">panic!</code></h3>

<ol>
  <li>
    <p>å…³äº <code class="highlighter-rouge">panic!</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">Result</code></p>

    <p>è¿™æ˜¯ä¸€ä¸ªæšä¸¾, è¡¨ç¤ºè¿™ä¸ªå€¼å¯ä»¥æ˜¯æœ‰ä¸¤ç§ç»“æœ, å¦‚æœæ˜¯<code class="highlighter-rouge">OK</code>ä¼šé™„å¸¦å¯¹åº”çš„<code class="highlighter-rouge">&lt;T&gt;</code>ç±»å‹, å¦‚æœæ˜¯<code class="highlighter-rouge">Err</code>çš„è¯, å°†ä¼šæ˜¯æŠ¥é”™</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">enum</span> <span class="n">Result</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="nf">Ok</span><span class="p">(</span><span class="n">T</span><span class="p">),</span>
     <span class="nf">Err</span><span class="p">(</span><span class="n">E</span><span class="p">),</span>
 <span class="p">}</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">);</span>

     <span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="k">match</span> <span class="n">f</span> <span class="p">{</span>
         <span class="nf">Ok</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">file</span><span class="p">,</span>
         <span class="nf">Err</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">{</span>
             <span class="c">// è¿™é‡Œçš„ panic! è¡¨ç¤ºä¼šç›´æ¥åœæ­¢åœ¨è¿™é‡Œ</span>
             <span class="nd">panic!</span><span class="p">(</span><span class="s">"Problem opening the file: {:?}"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
         <span class="p">},</span>
     <span class="p">};</span>
 <span class="p">}</span>

 <span class="c">// ç”šè‡³å¯ä»¥åŒ¹é…ä¸åŒçš„é”™è¯¯ ä¹Ÿå°±æ˜¯é’ˆå¯¹ err çš„é”™è¯¯ç±»å‹åšæ–‡ç« </span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">ErrorKind</span><span class="p">;</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">);</span>

     <span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="k">match</span> <span class="n">f</span> <span class="p">{</span>
         <span class="nf">Ok</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">file</span><span class="p">,</span>
         <span class="nf">Err</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="k">match</span> <span class="n">error</span><span class="nf">.kind</span><span class="p">()</span> <span class="p">{</span>
             <span class="nn">ErrorKind</span><span class="p">::</span><span class="n">NotFound</span> <span class="k">=&gt;</span> <span class="k">match</span> <span class="nn">File</span><span class="p">::</span><span class="nf">create</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span> <span class="p">{</span>
                 <span class="nf">Ok</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">fc</span><span class="p">,</span>
                 <span class="nf">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nd">panic!</span><span class="p">(</span><span class="s">"Problem creating the file: {:?}"</span><span class="p">,</span> <span class="n">e</span><span class="p">),</span>
             <span class="p">},</span>
             <span class="n">other_error</span> <span class="k">=&gt;</span> <span class="nd">panic!</span><span class="p">(</span><span class="s">"Problem opening the file: {:?}"</span><span class="p">,</span> <span class="n">other_error</span><span class="p">),</span>
         <span class="p">},</span>
     <span class="p">};</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>é—­åŒ…</p>

    <p>å¦‚æœåœ¨ä½¿ç”¨å¤šä¸ª<code class="highlighter-rouge">match</code>ä¼šä½¿å¾—ä»£ç çœ‹èµ·æ¥å¾ˆåŸå§‹</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">ErrorKind</span><span class="p">;</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span><span class="nf">.unwrap_or_else</span><span class="p">(|</span><span class="n">error</span><span class="p">|</span> <span class="p">{</span>
         <span class="k">if</span> <span class="n">error</span><span class="nf">.kind</span><span class="p">()</span> <span class="o">==</span> <span class="nn">ErrorKind</span><span class="p">::</span><span class="n">NotFound</span> <span class="p">{</span>
             <span class="nn">File</span><span class="p">::</span><span class="nf">create</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span><span class="nf">.unwrap_or_else</span><span class="p">(|</span><span class="n">error</span><span class="p">|</span> <span class="p">{</span>
                 <span class="nd">panic!</span><span class="p">(</span><span class="s">"Problem creating the file: {:?}"</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
             <span class="p">})</span>
         <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
             <span class="nd">panic!</span><span class="p">(</span><span class="s">"Problem opening the file: {:?}"</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
         <span class="p">}</span>
     <span class="p">});</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ–°çš„å…³é”®å­—ç”¨æ¥å•ç‹¬è§£å†³æŠ¥é”™ <code class="highlighter-rouge">unwrap</code> å’Œ <code class="highlighter-rouge">expect</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span><span class="nf">.unwrap</span><span class="p">();</span>   <span class="c">// å¦‚æœæŠ¥é”™ ä¼šç›´æ¥ä¸­æ–­åœ¨è¿™é‡Œ</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span><span class="nf">.expect</span><span class="p">(</span><span class="s">"Failed to open hello.txt"</span><span class="p">);</span> <span class="c">// å¦‚æœæŠ¥é”™ ä¼šç›´æ¥æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ å¹¶ä¸”ä¸­æ–­</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ä¼ é€’æŠ¥é”™</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>
     <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">Read</span><span class="p">;</span>
     <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>

     <span class="c">// é¦–å…ˆçœ‹è¿”å›å€¼ æ˜¯ä¸ª Result</span>
     <span class="k">fn</span> <span class="nf">read_username_from_file</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
         <span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">);</span>
         <span class="c">// åˆ¤æ–­ f æ˜¯å¦æ˜¯é”™è¯¯ å¦‚æœæ˜¯çš„è¯ç›´æ¥è¿”å›æŠ¥é”™ å¦åˆ™ç›´æ¥èµ‹å€¼ä¸ºæ–‡ä»¶çš„ å¥æŸ„</span>
         <span class="k">let</span> <span class="k">mut</span> <span class="n">f</span> <span class="o">=</span> <span class="k">match</span> <span class="n">f</span> <span class="p">{</span>
             <span class="nf">Ok</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">file</span><span class="p">,</span>
             <span class="nf">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="k">return</span> <span class="nf">Err</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
         <span class="p">};</span>

         <span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>

         <span class="c">// åŒ¹é…æ–‡ä»¶è¯»å‡ºæ¥çš„å†…å®¹ç»™åˆ° æ–°å»ºçš„ s å½“ä¸­å»</span>
         <span class="k">match</span> <span class="n">f</span><span class="nf">.read_to_string</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
             <span class="nf">Ok</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nf">Ok</span><span class="p">(</span><span class="n">s</span><span class="p">),</span>
             <span class="nf">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nf">Err</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
         <span class="p">}</span>   <span class="c">// è¿™é‡Œæ²¡æœ‰ ; è¡¨ç¤ºè¿™é‡Œå°±æ˜¯è¿”å›å€¼äº†</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ç”±äºä»¥ä¸Šä¼ é€’ éå¸¸å¸¸è§ å¯¼è‡´å¯ä»¥ ç”¨ <code class="highlighter-rouge">?</code> ä½¿å…¶ç²¾ç®€</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">Read</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>

 <span class="k">fn</span> <span class="nf">read_username_from_file</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">f</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
     <span class="n">f</span><span class="nf">.read_to_string</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">s</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
     <span class="nf">Ok</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
 <span class="p">}</span>
</code></pre></div>    </div>

    <p>è¯¥<code class="highlighter-rouge">?</code>æ”¾åœ¨å<code class="highlighter-rouge">Result</code>å€¼å®šä¹‰ä¸ºå·¥ä½œåœ¨å‡ ä¹ç›¸åŒçš„æ–¹å¼<code class="highlighter-rouge">match</code>è¡¨è¾¾æˆ‘ä»¬å®šä¹‰æ¥å¤„ç†<code class="highlighter-rouge">Result</code>
 ä¹Ÿå°±æ˜¯å¯ä»¥ç›´æ¥åšåˆ°ç®€åŒ–è¿”å›æ“ä½œçš„èƒ½åŠ›
 ç”šè‡³æ›´åŠ çš„ç²¾ç®€</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">Read</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>

 <span class="k">fn</span> <span class="nf">read_username_from_file</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
     <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span><span class="o">?</span><span class="nf">.read_to_string</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">s</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
     <span class="nf">Ok</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
 <span class="p">}</span>
</code></pre></div>    </div>

    <p>å¥½å§ å…¶å®è¿˜å¯ä»¥è¶…çº§ç²¾ç®€</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>

 <span class="k">fn</span> <span class="nf">read_username_from_file</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="c">// æˆ‘è§‰å¾—è¿™é‡Œå·²ç»ç™«äº† ç›´æ¥å¸®ä½ å†™å¥½äº† æ‰“å¼€æ–‡ä»¶å¤¹å¹¶ä¸”è·å–å†…å®¹ å¹¶ä¸”è¿”å›å‡ºå»...</span>
     <span class="nn">fs</span><span class="p">::</span><span class="nf">read_to_string</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>é‚£ä¹ˆè¿™ä¸ª<code class="highlighter-rouge">?</code>èƒ½ç”¨åœ¨åˆ«çš„åœ°æ–¹å—? ä¸èƒ½çš„ åªèƒ½ç”¨åœ¨è¿”å›å€¼ä¸º <code class="highlighter-rouge">Result</code> çš„å‡½æ•°ä¸Š</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// é”™è¯¯ä»£ç </span>

 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
 <span class="p">}</span>
</code></pre></div>    </div>

    <p>è¿™é‡Œè¯´ä¸€å˜´ <code class="highlighter-rouge">main</code> å‡½æ•°çš„è¿”å›å€¼æ˜¯ <code class="highlighter-rouge">()</code> æˆ‘å®Œå…¨ä¸çŸ¥é“è¿™æ˜¯ä¸ªä»€ä¹ˆç±»å‹â€¦</p>

    <p>ä½†ä½ å¯ä»¥è¿™ä¹ˆå†™</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">error</span><span class="p">::</span><span class="n">Error</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="p">(),</span> <span class="nb">Box</span><span class="o">&lt;</span><span class="n">dyn</span> <span class="n">Error</span><span class="o">&gt;&gt;</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
     <span class="c">// è¿”å›äº† () çš„åŒæ—¶ è€¶ å®Œæˆäº† ?</span>
     <span class="nf">Ok</span><span class="p">(())</span>
 <span class="p">}</span>
</code></pre></div>    </div>

    <p>ä½†è¿™é‡Œå‡ºç°äº†ä¸ªæ–°çš„ç©æ„ <code class="highlighter-rouge">Box&lt;dyn Error&gt;</code> <code class="highlighter-rouge">Box</code> çœ‹äº†æ–‡æ¡£ä¸æ˜¯å¾ˆæ‡‚ <code class="highlighter-rouge">pub struct Box&lt;T: ?Sized&gt;(Unique&lt;T&gt;);</code>
 ä½† <code class="highlighter-rouge">dyn</code> è¡¨ç¤ºå¯ä»¥æ˜¯ä»»ä½•ç±»å‹
 æ‰€ä»¥ <code class="highlighter-rouge">Box&lt;dyn Error&gt;</code> å¯ä»¥ç†è§£ä¸º ä»»ä½•ç±»å‹çš„é”™è¯¯</p>
  </li>
</ol>

<h3 id="æ³›å‹-ç‰¹å¾-å’Œ-ç”Ÿå‘½å‘¨æœŸ">æ³›å‹ ç‰¹å¾ å’Œ ç”Ÿå‘½å‘¨æœŸ</h3>

<h4 id="ç‰¹å¾">ç‰¹å¾</h4>

<ol>
  <li>
    <p>å®šä¹‰å…±åŒæ¥å£</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">pub</span> <span class="k">trait</span> <span class="n">Summary</span> <span class="p">{</span>
     <span class="k">fn</span> <span class="nf">summarize</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">String</span><span class="p">;</span>
 <span class="p">}</span>

 <span class="k">pub</span> <span class="k">struct</span> <span class="n">NewsArticle</span> <span class="p">{</span>
     <span class="k">pub</span> <span class="n">headline</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
     <span class="k">pub</span> <span class="n">location</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
     <span class="k">pub</span> <span class="n">author</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
     <span class="k">pub</span> <span class="n">content</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
 <span class="p">}</span>

 <span class="c">// å®ç°æ¥å£ å¯¹äº NewsArticle è¿™ä¸ªç»“æ„ä½“æ¥è¯´</span>
 <span class="k">impl</span> <span class="n">Summary</span> <span class="k">for</span> <span class="n">NewsArticle</span> <span class="p">{</span>
     <span class="k">fn</span> <span class="nf">summarize</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
         <span class="nd">format!</span><span class="p">(</span><span class="s">"{}, by {} ({})"</span><span class="p">,</span> <span class="k">self</span><span class="py">.headline</span><span class="p">,</span> <span class="k">self</span><span class="py">.author</span><span class="p">,</span> <span class="k">self</span><span class="py">.location</span><span class="p">)</span>
     <span class="p">}</span>
 <span class="p">}</span>

 <span class="k">pub</span> <span class="k">struct</span> <span class="n">Tweet</span> <span class="p">{</span>
     <span class="k">pub</span> <span class="n">username</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
     <span class="k">pub</span> <span class="n">content</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
     <span class="k">pub</span> <span class="n">reply</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
     <span class="k">pub</span> <span class="n">retweet</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
 <span class="p">}</span>

 <span class="c">// å®ç°æ¥å£ å¯¹äº Tweet è¿™ä¸ªç»“æ„ä½“æ¥è¯´</span>
 <span class="k">impl</span> <span class="n">Summary</span> <span class="k">for</span> <span class="n">Tweet</span> <span class="p">{</span>
     <span class="k">fn</span> <span class="nf">summarize</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
         <span class="nd">format!</span><span class="p">(</span><span class="s">"{}: {}"</span><span class="p">,</span> <span class="k">self</span><span class="py">.username</span><span class="p">,</span> <span class="k">self</span><span class="py">.content</span><span class="p">)</span>
     <span class="p">}</span>
 <span class="p">}</span>

</code></pre></div>    </div>
  </li>
  <li>
    <p>ä¸èƒ½å®ç°å¤–éƒ¨ç‰¹å¾, åªèƒ½æœ¬åœ°ä½¿ç”¨</p>
  </li>
  <li>
    <p>å¯ä»¥é»˜è®¤å®ç°ç‰¹å¾, è¿™æ ·æœ¬åœ°å°±éƒ½å¯ä»¥ä½¿ç”¨äº†</p>
  </li>
  <li>
    <p>ç‰¹å¾å¯ä»¥ä½œä¸ºå‚æ•°, ä¹Ÿå°±æ˜¯å¿…é¡»å®ç°è¿™ä¸ªç‰¹å¾çš„ä»»æ„ç±»å‹</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// å•ç‹¬ä½¿ç”¨</span>
 <span class="k">pub</span> <span class="k">fn</span> <span class="nf">notify</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="k">impl</span> <span class="n">Summary</span><span class="p">)</span> <span class="p">{</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"Breaking news! {}"</span><span class="p">,</span> <span class="n">item</span><span class="nf">.summarize</span><span class="p">());</span>
 <span class="p">}</span>

 <span class="c">// æå–å‡ºæ¥ä½¿ç”¨</span>
 <span class="k">pub</span> <span class="k">fn</span> <span class="n">notify</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Summary</span><span class="o">&gt;</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="p">{</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"Breaking news! {}"</span><span class="p">,</span> <span class="n">item</span><span class="nf">.summarize</span><span class="p">());</span>
 <span class="p">}</span>

 <span class="c">// æ­£å¸¸å•ç‹¬ä½¿ç”¨å¤šä¸ª</span>
 <span class="k">pub</span> <span class="k">fn</span> <span class="nf">notify</span><span class="p">(</span><span class="n">item1</span><span class="p">:</span> <span class="k">impl</span> <span class="n">Summary</span><span class="p">,</span> <span class="n">item2</span><span class="p">:</span> <span class="k">impl</span> <span class="n">Summary</span><span class="p">)</span> <span class="p">{</span>

 <span class="p">}</span>

 <span class="c">// ä½†å¯ä»¥å†™æˆè¿™æ ·</span>
 <span class="k">pub</span> <span class="k">fn</span> <span class="n">notify</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Summary</span><span class="o">&gt;</span><span class="p">(</span><span class="n">item1</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">item2</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="p">{</span>

 <span class="p">}</span>

 <span class="c">// å¯ä»¥ç›¸åŠ </span>
 <span class="k">pub</span> <span class="k">fn</span> <span class="nf">notify</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="k">impl</span> <span class="n">Summary</span> <span class="o">+</span> <span class="n">Display</span><span class="p">)</span> <span class="p">{</span>

 <span class="p">}</span>

 <span class="c">// å½“ç„¶ä¹Ÿå¯ä»¥æå–å‡ºæ¥</span>
 <span class="k">pub</span> <span class="k">fn</span> <span class="n">notify</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Summary</span> <span class="o">+</span> <span class="n">Display</span><span class="o">&gt;</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="p">{</span>

 <span class="p">}</span>

 <span class="c">// ä½†å¦‚æœæœ‰å¤šä¸ªçš„æ—¶å€™ å°±ä¼šå¾ˆä¹±</span>
 <span class="k">fn</span> <span class="n">some_function</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Display</span> <span class="o">+</span> <span class="n">Clone</span><span class="p">,</span> <span class="n">U</span><span class="p">:</span> <span class="n">Clone</span> <span class="o">+</span> <span class="n">Debug</span><span class="o">&gt;</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">U</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>

 <span class="p">}</span>

 <span class="c">// å¯ä»¥ä½¿ç”¨ where æ¥åç»­è¡¥å……è¯´æ˜</span>
 <span class="k">fn</span> <span class="n">some_function</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">U</span><span class="o">&gt;</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">U</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span>
     <span class="k">where</span> <span class="n">T</span><span class="p">:</span> <span class="n">Display</span> <span class="o">+</span> <span class="n">Clone</span><span class="p">,</span>
         <span class="n">U</span><span class="p">:</span> <span class="n">Clone</span> <span class="o">+</span> <span class="n">Debug</span>
 <span class="p">{</span>

 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ—¢ç„¶èƒ½åšå‚æ•°, é‚£ä¹ˆä¹Ÿèƒ½åšè¿”å›å€¼</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">returns_summarizable</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="k">impl</span> <span class="n">Summary</span> <span class="p">{</span>
     <span class="n">Tweet</span> <span class="p">{</span>
         <span class="n">username</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"horse_ebooks"</span><span class="p">),</span>
         <span class="n">content</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"of course, as you probably already know, people"</span><span class="p">),</span>
         <span class="n">reply</span><span class="p">:</span> <span class="k">false</span><span class="p">,</span>
         <span class="n">retweet</span><span class="p">:</span> <span class="k">false</span><span class="p">,</span>
     <span class="p">}</span>
 <span class="p">}</span>

 <span class="c">// ä½†æœ‰å±€é™æ€§ ä¹Ÿå°±æ˜¯è¯´ è¿™æ ·æ˜¯ä¸å…è®¸çš„ åªå…è®¸è¿”å›ä¸€ä¸ªç±»å‹</span>
 <span class="k">fn</span> <span class="nf">returns_summarizable</span><span class="p">(</span><span class="n">switch</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="k">impl</span> <span class="n">Summary</span> <span class="p">{</span>
     <span class="k">if</span> <span class="n">switch</span> <span class="p">{</span>
         <span class="n">NewsArticle</span> <span class="p">{</span>
             <span class="c">// ...</span>
         <span class="p">}</span>
     <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="n">Tweet</span> <span class="p">{</span>
             <span class="c">// ...</span>
         <span class="p">}</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å®Œæˆä¹‹å‰çš„æ¯”å¤§å°</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// PartialOrd å¯ä»¥æ¯”è¾ƒ Copy å¯ä»¥è¿›è¡Œæ‹·è´ ä»£è¡¨å°±æ˜¯åœ¨å †ä¸Šçš„å€¼</span>
 <span class="k">fn</span> <span class="n">largest</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">PartialOrd</span> <span class="o">+</span> <span class="nb">Copy</span><span class="o">&gt;</span><span class="p">(</span><span class="n">list</span><span class="p">:</span> <span class="o">&amp;</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="k">-&gt;</span> <span class="n">T</span> <span class="p">{</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">largest</span> <span class="o">=</span> <span class="n">list</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

     <span class="k">for</span> <span class="o">&amp;</span><span class="n">item</span> <span class="n">in</span> <span class="n">list</span><span class="nf">.iter</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">if</span> <span class="n">item</span> <span class="o">&gt;</span> <span class="n">largest</span> <span class="p">{</span>
             <span class="n">largest</span> <span class="o">=</span> <span class="n">item</span><span class="p">;</span>
         <span class="p">}</span>
     <span class="p">}</span>

     <span class="n">largest</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="lifetime-å¯¿å‘½"><code class="highlighter-rouge">lifetime</code> å¯¿å‘½</h4>

<ol>
  <li>ä¸‰æ¡è§„åˆ™
    <ol>
      <li>ä½œä¸ºå¼•ç”¨çš„å‚æ•°éƒ½æœ‰å…¶è‡ªå·±çš„å¯¿å‘½ <code class="highlighter-rouge">fn foo&lt;'a, 'b&gt;(x: &amp;'a i32, y: &amp;'b i32);</code></li>
      <li>å¦‚æœå­˜åœ¨ä¸€ä¸ªæœ‰è¾“å…¥å¯¿å‘½çš„å‚æ•°çš„æ—¶å€™, é‚£ä¹ˆè¿”å›çš„ä¹Ÿå¾—æ˜¯è¿™ä¸ªå¸¦æœ‰å¯¿å‘½çš„å‚æ•°</li>
      <li>å¦‚æœæœ‰å¤šä¸ªä¸åŒå¯¿å‘½å‚æ•°, ä½†å…¶ä¸­æœ‰çš„æ˜¯ <code class="highlighter-rouge">&amp;self</code> æˆ–è€…æ˜¯ <code class="highlighter-rouge">&amp;mut self</code>, é‚£ä¹ˆå°±æŠŠ <code class="highlighter-rouge">self</code> åˆ†é…ç»™æ‰€æœ‰è¾“å‡ºå¯¿å‘½å‚æ•°???</li>
    </ol>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// åˆ†æ 1</span>
 <span class="k">fn</span> <span class="nf">first_word</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nb">str</span> <span class="p">{</span>
 <span class="c">// ç”±äºæ²¡æœ‰æŒ‡å®š é‚£ä¹ˆå°±ç®—æ˜¯ å…ˆæ‰§è¡Œç¬¬ä¸€æ¡è§„åˆ™ ç»™æ‰€æœ‰çš„å¼•ç”¨å‚æ•°æŒ‡å®šå¯¿å‘½</span>
 <span class="k">fn</span> <span class="nf">first_word</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="o">&amp;</span><span class="nv">'a</span> <span class="nb">str</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nb">str</span> <span class="p">{</span>
 <span class="c">// åˆåªæœ‰ä¸€ä¸ªå¯¿å‘½ç±»å‹, é‚£ä¹ˆæŠŠè¾“å…¥çš„å¯¿å‘½ç»™åˆ°è¾“å‡º</span>
 <span class="k">fn</span> <span class="nf">first_word</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="o">&amp;</span><span class="nv">'a</span> <span class="nb">str</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nv">'a</span> <span class="nb">str</span> <span class="p">{</span>
 <span class="c">// é‚£ä¹ˆç°åœ¨ï¼Œæ­¤å‡½æ•°æ‰€æœ‰å¼•ç”¨éƒ½å…·æœ‰å¯¿å‘½ï¼Œå¹¶ä¸”ç¼–è¯‘å™¨å¯ä»¥ç»§ç»­è¿›è¡Œåˆ†æï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸ç”¨ç¼–å†™è¿™ä¸ªå¯¿å‘½äº†</span>


 <span class="c">// åˆ†æ 2</span>
 <span class="k">fn</span> <span class="nf">longest</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nb">str</span> <span class="p">{</span>
 <span class="c">// ç”±äºæ²¡æœ‰æŒ‡å®š å…¥å‚çš„å¯¿å‘½ æ‰€ä»¥å…ˆæ‰§è¡Œç¬¬ä¸€æ¡è§„åˆ™</span>
 <span class="k">fn</span> <span class="nf">longest</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="o">&amp;</span><span class="nv">'a</span> <span class="nb">str</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="o">&amp;</span><span class="nv">'b</span> <span class="nb">str</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nb">str</span> <span class="p">{</span>
 <span class="c">// ç¬¬äºŒæ¡è§„åˆ™é€‚ç”¨? ç”±äºæœ‰å¤šä¸ªä¸é€‚ç”¨</span>
 <span class="c">// ç¬¬ä¸‰æ¡è§„åˆ™å‘¢? æ²¡æœ‰ self ä¹Ÿä¸é€‚ç”¨</span>
 <span class="c">// æ‰€ä»¥è¿™ä¸ªç¼–è¯‘çš„æ—¶å€™ å°±ä¼šæŠ¥é”™</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="è‡ªåŠ¨åŒ–æµ‹è¯•">è‡ªåŠ¨åŒ–æµ‹è¯•</h3>

<h3 id="æ„å»ºå‘½ä»¤è¡Œç¨‹åº">æ„å»ºå‘½ä»¤è¡Œç¨‹åº</h3>

<h3 id="é—­åŒ…å’Œè¿­ä»£å™¨">é—­åŒ…å’Œè¿­ä»£å™¨</h3>

<h4 id="é—­åŒ…">é—­åŒ…</h4>

<ol>
  <li>
    <p>å¯ä»¥ä¸æŒ‡å®šæ•°æ®ç±»å‹, ä½†ä½¿ç”¨çš„æ—¶å€™ ä¸èƒ½ä¹±ç”¨, ä»–ä¸æ˜¯æ³›å‹</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span>  <span class="nf">add_one_v1</span>   <span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">}</span>  <span class="c">// å‡½æ•° å®Œæ•´ç‰ˆ</span>
 <span class="k">let</span> <span class="n">add_one_v2</span> <span class="o">=</span> <span class="p">|</span><span class="n">x</span><span class="p">:</span> <span class="nb">u32</span><span class="p">|</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">};</span> <span class="c">// é—­åŒ… å®Œæ•´ç‰ˆ</span>
 <span class="k">let</span> <span class="n">add_one_v3</span> <span class="o">=</span> <span class="p">|</span><span class="n">x</span><span class="p">|</span>             <span class="p">{</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">};</span> <span class="c">// é—­åŒ… åˆ é™¤æŒ‡å®šæ•°æ®ç±»å‹</span>
 <span class="k">let</span> <span class="n">add_one_v4</span> <span class="o">=</span> <span class="p">|</span><span class="n">x</span><span class="p">|</span>               <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>  <span class="p">;</span> <span class="c">// é—­åŒ… åˆ é™¤èŠ±æ‹¬å·</span>


 <span class="c">// ä½†åœ¨ä½¿ç”¨åä¸Š</span>
 <span class="k">let</span> <span class="n">example_closure</span> <span class="o">=</span> <span class="p">|</span><span class="n">x</span><span class="p">|</span> <span class="n">x</span><span class="p">;</span>

 <span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="nf">example_closure</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">));</span> <span class="c">// ä½¿ç”¨äº†å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ä¼ å…¥</span>
 <span class="k">let</span> <span class="n">n</span> <span class="o">=</span> <span class="nf">example_closure</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>                     <span class="c">// åˆä½¿ç”¨äº† æ•°å­—  è¿™é‡Œä¼šå´©</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>é—­åŒ…ä¹Ÿæ˜¯æœ‰ç‰¹å¾çš„, è¿™æ ·çš„è¯å°±å¯ä»¥ä½œä¸ºæ³›å‹çš„å‚æ•°ä¼ å…¥äº† <code class="highlighter-rouge">Fn</code> <code class="highlighter-rouge">FnMut</code> <code class="highlighter-rouge">FnOnce</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">struct</span> <span class="n">Cacher</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
     <span class="k">where</span> <span class="n">T</span><span class="p">:</span> <span class="nf">Fn</span><span class="p">(</span><span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span>
 <span class="p">{</span>
     <span class="n">calculation</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
     <span class="n">value</span><span class="p">:</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">u32</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>é—­åŒ…å¯ä»¥ä½¿ç”¨å¤–éƒ¨çš„å˜é‡</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

     <span class="k">let</span> <span class="n">equal_to_x</span> <span class="o">=</span> <span class="p">|</span><span class="n">z</span><span class="p">|</span> <span class="n">z</span> <span class="o">==</span> <span class="n">x</span><span class="p">;</span>    <span class="c">// ä½¿ç”¨äº† x</span>
     <span class="c">// fn equal_to_x(z: i32) -&gt; bool { z == x } //è¿™ä¸ªå°±ä¼šå´©</span>

     <span class="k">let</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

     <span class="k">assert</span><span class="o">!</span><span class="p">(</span><span class="nf">equal_to_x</span><span class="p">(</span><span class="n">y</span><span class="p">));</span>
 <span class="p">}</span>
</code></pre></div>    </div>

    <p>æ‰€ä»¥è¯´é—­åŒ…æ˜¯ä¼šå¼ºåˆ¶è·å–æ‰€æœ‰æƒçš„
 <code class="highlighter-rouge">FnOnce</code>    è·å–å®Œå ä½†åªèƒ½è°ƒç”¨ä¸€æ¬¡
 <code class="highlighter-rouge">FnMut</code>     å¯å˜çš„å½¢å¼è·å–äº†å€¼
 <code class="highlighter-rouge">Fn</code>        ä¸å¯å˜çš„å½¢å¼è·å–äº†å€¼</p>
  </li>
</ol>

<h4 id="è¿­ä»£å™¨">è¿­ä»£å™¨</h4>

<ol>
  <li>
    <p>ç‰¹å¾ä¸º <code class="highlighter-rouge">Iterator</code> å’Œ å…·æœ‰ <code class="highlighter-rouge">next</code> æ–¹æ³•</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">pub</span> <span class="k">trait</span> <span class="n">Iterator</span> <span class="p">{</span>
     <span class="k">type</span> <span class="n">Item</span><span class="p">;</span>

     <span class="k">fn</span> <span class="nf">next</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nn">Self</span><span class="p">::</span><span class="n">Item</span><span class="o">&gt;</span><span class="p">;</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">next</code> æ˜¯ä¼šæ¶ˆè€—æ‰çš„</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="err">#</span><span class="p">[</span><span class="n">test</span><span class="p">]</span>
 <span class="k">fn</span> <span class="nf">iterator_demonstration</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">v1</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>

     <span class="k">let</span> <span class="k">mut</span> <span class="n">v1_iter</span> <span class="o">=</span> <span class="n">v1</span><span class="nf">.iter</span><span class="p">();</span>

     <span class="nd">assert_eq!</span><span class="p">(</span><span class="n">v1_iter</span><span class="nf">.next</span><span class="p">(),</span> <span class="nf">Some</span><span class="p">(</span><span class="o">&amp;</span><span class="mi">1</span><span class="p">));</span>
     <span class="nd">assert_eq!</span><span class="p">(</span><span class="n">v1_iter</span><span class="nf">.next</span><span class="p">(),</span> <span class="nf">Some</span><span class="p">(</span><span class="o">&amp;</span><span class="mi">2</span><span class="p">));</span>
     <span class="nd">assert_eq!</span><span class="p">(</span><span class="n">v1_iter</span><span class="nf">.next</span><span class="p">(),</span> <span class="nf">Some</span><span class="p">(</span><span class="o">&amp;</span><span class="mi">3</span><span class="p">));</span>
     <span class="nd">assert_eq!</span><span class="p">(</span><span class="n">v1_iter</span><span class="nf">.next</span><span class="p">(),</span> <span class="nb">None</span><span class="p">);</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">iterator_sum</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">v1</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">v1_iter</span> <span class="o">=</span> <span class="n">v1</span><span class="nf">.iter</span><span class="p">();</span>
     <span class="k">let</span> <span class="n">total</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="n">v1_iter</span><span class="nf">.sum</span><span class="p">();</span>
     <span class="nd">assert_eq!</span><span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>è¿­ä»£å™¨æ˜¯ä¸ä¼šè‡ªå·±è°ƒç”¨çš„</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="n">v1</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>

 <span class="n">v1</span><span class="nf">.iter</span><span class="p">()</span><span class="nf">.map</span><span class="p">(|</span><span class="n">x</span><span class="p">|</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>   <span class="c">// è¿™ä¹ˆä½¿ç”¨æ—¶ä¼šæ”¶åˆ°è­¦å‘Š è¯´æ˜è¿™è¡Œä»£ç æ²¡æœ‰èµ·åˆ°ä»»ä½•ä½œç”¨</span>

 <span class="k">let</span> <span class="n">v2</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">_</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">v1</span><span class="nf">.iter</span><span class="p">()</span><span class="nf">.map</span><span class="p">(|</span><span class="n">x</span><span class="p">|</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="nf">.collect</span><span class="p">();</span>    <span class="c">// ç›´æ¥è¿›è¡Œè¿­ä»£</span>

 <span class="nd">assert_eq!</span><span class="p">(</span><span class="n">v2</span><span class="p">,</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ä½¿ç”¨åœºæ™¯</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="err">#</span><span class="o">!</span><span class="p">[</span><span class="nf">allow</span><span class="p">(</span><span class="n">unused_variables</span><span class="p">)]</span>
 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
 <span class="nd">#[derive(PartialEq,</span> <span class="nd">Debug)]</span>
 <span class="k">struct</span> <span class="n">Shoe</span> <span class="p">{</span>
     <span class="n">size</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
     <span class="n">style</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">shoes_in_my_size</span><span class="p">(</span><span class="n">shoes</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">Shoe</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">shoe_size</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">Shoe</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="n">shoes</span><span class="nf">.into_iter</span><span class="p">()</span>
         <span class="nf">.filter</span><span class="p">(|</span><span class="n">s</span><span class="p">|</span> <span class="n">s</span><span class="py">.size</span> <span class="o">==</span> <span class="n">shoe_size</span><span class="p">)</span>
         <span class="nf">.collect</span><span class="p">()</span>
 <span class="p">}</span>

 <span class="nd">#[test]</span>
 <span class="k">fn</span> <span class="nf">filters_by_size</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">shoes</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span>
         <span class="n">Shoe</span> <span class="p">{</span> <span class="n">size</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"sneaker"</span><span class="p">)</span> <span class="p">},</span>
         <span class="n">Shoe</span> <span class="p">{</span> <span class="n">size</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"sandal"</span><span class="p">)</span> <span class="p">},</span>
         <span class="n">Shoe</span> <span class="p">{</span> <span class="n">size</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"boot"</span><span class="p">)</span> <span class="p">},</span>
     <span class="p">];</span>

     <span class="k">let</span> <span class="n">in_my_size</span> <span class="o">=</span> <span class="nf">shoes_in_my_size</span><span class="p">(</span><span class="n">shoes</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

     <span class="nd">assert_eq!</span><span class="p">(</span>
         <span class="n">in_my_size</span><span class="p">,</span>
         <span class="nd">vec!</span><span class="p">[</span>
             <span class="n">Shoe</span> <span class="p">{</span> <span class="n">size</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"sneaker"</span><span class="p">)</span> <span class="p">},</span>
             <span class="n">Shoe</span> <span class="p">{</span> <span class="n">size</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"boot"</span><span class="p">)</span> <span class="p">},</span>
         <span class="p">]</span>
     <span class="p">);</span>
 <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="cratesio">Crates.io</h3>

<h3 id="æ™ºèƒ½æŒ‡é’ˆ">æ™ºèƒ½æŒ‡é’ˆ</h3>

<ol>
  <li><code class="highlighter-rouge">Rc&lt;T&gt;</code> å…è®¸å¯¹ä¸€ä¸ªå˜é‡æœ‰å¤šä¸ªæ‰€æœ‰è€…ï¼›<code class="highlighter-rouge">Box&lt;T&gt;</code> å’Œ <code class="highlighter-rouge">RefCell&lt;T&gt;</code> åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ã€‚</li>
  <li><code class="highlighter-rouge">Box&lt;T&gt;</code> å…è®¸åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥æ˜¯ä¸å¯å˜è¿˜æ˜¯å¯å˜çš„ï¼›<code class="highlighter-rouge">Rc&lt;T&gt;</code> åªå…è®¸åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ä¸å¯å˜çš„å¼•ç”¨ï¼›<code class="highlighter-rouge">RefCell&lt;T&gt;</code> å…è®¸åœ¨è¿è¡Œæ—¶æ£€æŸ¥ä¸å¯å˜æˆ–å¯å˜çš„å¼•ç”¨ã€‚</li>
  <li>ç”±äº<code class="highlighter-rouge">RefCell&lt;T&gt;</code>å…è®¸åœ¨è¿è¡Œæ—¶æ£€æŸ¥å¯å˜å¼•ç”¨ï¼Œå› æ­¤ <code class="highlighter-rouge">RefCell&lt;T&gt;</code> å³ä½¿<code class="highlighter-rouge">RefCell&lt;T&gt;</code> æ˜¯ä¸å¯å˜çš„ï¼Œä¹Ÿå¯ä»¥åœ¨å†…éƒ¨æ”¹å˜å€¼ã€‚</li>
</ol>

<h3 id="å¹¶å‘">å¹¶å‘</h3>

<h4 id="çº¿ç¨‹">çº¿ç¨‹</h4>

<ol>
  <li>
    <p>åˆ›å»ºçº¿ç¨‹ <code class="highlighter-rouge">thread::spawn</code></p>
  </li>
  <li>
    <p>ç­‰å¾…è¯¥çº¿ç¨‹è·‘å®Œ <code class="highlighter-rouge">join</code> é˜»å¡çš„</p>
  </li>
  <li>
    <p>çº¿ç¨‹å†…ä½¿ç”¨å¤–éƒ¨çš„å€¼ å…¶å®ä¹Ÿå¯ä»¥çœ‹åšæ˜¯ é—­åŒ…å†…ä½¿ç”¨å¤–éƒ¨å˜é‡ ä½†é—­åŒ…æ˜¯åœ¨å•ä¸€çº¿ç¨‹ä¸‹ä½¿ç”¨çš„ <code class="highlighter-rouge">move</code> æ˜¯é’ˆå¯¹çº¿ç¨‹é—­åŒ…çš„ æ‰€ä»¥ ä¼šå¼ºåˆ¶è·å–æ‰€æœ‰æƒ</p>
  </li>
</ol>

<h4 id="é€šé“">é€šé“</h4>

<ol>
  <li>
    <p>ä¾‹å­</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">thread</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">sync</span><span class="p">::</span><span class="n">mpsc</span><span class="p">;</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">rx</span><span class="p">)</span> <span class="o">=</span> <span class="nn">mpsc</span><span class="p">::</span><span class="nf">channel</span><span class="p">();</span>

     <span class="nn">thread</span><span class="p">::</span><span class="nf">spawn</span><span class="p">(</span><span class="k">move</span> <span class="p">||</span> <span class="p">{</span>
         <span class="k">let</span> <span class="n">val</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hi"</span><span class="p">);</span>
         <span class="n">tx</span><span class="nf">.send</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="nf">.unwrap</span><span class="p">();</span>  <span class="c">// ç§»äº¤æ‰€æœ‰æƒ</span>
     <span class="p">});</span>

     <span class="k">let</span> <span class="n">received</span> <span class="o">=</span> <span class="n">rx</span><span class="nf">.recv</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">();</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"Got: {}"</span><span class="p">,</span> <span class="n">received</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="ä¸Šé”">ä¸Šé”</h4>

<ol>
  <li>
    <p>äº’æ–¥ å’Œ åŸå­å¼•ç”¨è®¡æ•°</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">sync</span><span class="p">::{</span><span class="n">Mutex</span><span class="p">,</span> <span class="nb">Arc</span><span class="p">};</span>
 <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">thread</span><span class="p">;</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">counter</span> <span class="o">=</span> <span class="nn">Arc</span><span class="p">::</span><span class="nf">new</span><span class="p">(</span><span class="nn">Mutex</span><span class="p">::</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">handles</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[];</span>

     <span class="k">for</span> <span class="n">_</span> <span class="n">in</span> <span class="mi">0</span><span class="o">..</span><span class="mi">10</span> <span class="p">{</span>
         <span class="k">let</span> <span class="n">counter</span> <span class="o">=</span> <span class="nn">Arc</span><span class="p">::</span><span class="nf">clone</span><span class="p">(</span><span class="o">&amp;</span><span class="n">counter</span><span class="p">);</span>
         <span class="k">let</span> <span class="n">handle</span> <span class="o">=</span> <span class="nn">thread</span><span class="p">::</span><span class="nf">spawn</span><span class="p">(</span><span class="k">move</span> <span class="p">||</span> <span class="p">{</span>
             <span class="k">let</span> <span class="k">mut</span> <span class="n">num</span> <span class="o">=</span> <span class="n">counter</span><span class="nf">.lock</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">();</span>

             <span class="o">*</span><span class="n">num</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
         <span class="p">});</span>
         <span class="n">handles</span><span class="nf">.push</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
     <span class="p">}</span>

     <span class="k">for</span> <span class="n">handle</span> <span class="n">in</span> <span class="n">handles</span> <span class="p">{</span>
         <span class="n">handle</span><span class="nf">.join</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">();</span>
     <span class="p">}</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"Result: {}"</span><span class="p">,</span> <span class="o">*</span><span class="n">counter</span><span class="nf">.lock</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">());</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

  </div>

  
    <div class="post-comments" itemprop="comment">
      

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://danyow.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


<script id="dsq-count-scr" src="//danyow.disqus.com/count.js" async></script>


    </div>
  

</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

&copy;  - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="https://blog.danyow.cn/feed.xml">RSS</a>

    </p>

  </div>

</footer>


  </body>

</html>
