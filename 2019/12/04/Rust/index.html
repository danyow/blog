<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>Rust</title>
  <meta name="description" content="Title: Mac ä¸‹å­¦ä¹ ä½¿ç”¨ Rust">
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://blog.danyow.cn/2019/12/04/Rust/">
  
  
  <link rel="alternate" type="application/rss+xml" title="ğŸ“’ Danyow" href="https://blog.danyow.cn/feed.xml">

  

  
  <meta property="og:title" content="Rust">
  <meta property="og:site_name" content="ğŸ“’ Danyow">
  <meta property="og:url" content="https://blog.danyow.cn/2019/12/04/Rust/">
  <meta property="og:description" content="Title: Mac ä¸‹å­¦ä¹ ä½¿ç”¨ Rust">
  
  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:title" content="Rust">
  <meta name="twitter:description" content="Title: Mac ä¸‹å­¦ä¹ ä½¿ç”¨ Rust">
  
  

  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Bitter:400,400i,700&display=swap" rel="stylesheet">

  

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">ğŸ“’ Danyow</a>

    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/">å…³äº</a>
      
        
        <a class="page-link" href="/archives/">å½’æ¡£</a>
      
        
        <a class="page-link" href="https://github.com/danyow">GitHub</a>
      
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    
      <h1 class="post-title" itemprop="name headline">Rust</h1>
    
    <p class="post-meta"><time datetime="2019-12-04T14:39:06+00:00" itemprop="datePublished">Dec 4, 2019</time> â€¢
  
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <a href="/categories/mac/">Mac</a>,
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <a href="/categories/rust/">Rust</a>,
      
    
  
    
    
      
    
      
    
      
    
      
    
      
        <a href="/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</a>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  



</p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Title: Mac ä¸‹å­¦ä¹ ä½¿ç”¨ <em>Rust</em></p>

<h2 id="å®‰è£…">å®‰è£…</h2>

<h3 id="brew-å®‰è£…">brew å®‰è£…</h3>

<p>æµ‹è¯•ä¹‹å, ç¯å¢ƒæœ‰å¾ˆå¤šå†…å®¹æœ‰æ²¡å®‰è£…ä¸Š, ä¼°è®¡ä¹Ÿæ˜¯æ²¡æœ‰é…ç½®ç¯å¢ƒçš„åŸå› </p>

<h3 id="å®˜ç½‘æ–¹æ³•">å®˜ç½‘æ–¹æ³•</h3>

<ol>
  <li>
    <p><code class="highlighter-rouge">curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh</code></p>
  </li>
  <li>
    <p>å¯¼å…¥ç¯å¢ƒå‚æ•° <code class="highlighter-rouge">export PATH="$PATH:$HOME/.cargo/bin"</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">rustc --version</code></p>
  </li>
</ol>

<h2 id="å…¥é—¨">å…¥é—¨</h2>

<h3 id="rustc-ç¼–è¯‘">rustc ç¼–è¯‘</h3>

<p>éšä¾¿å†™ä¸€ä¸ª <code class="highlighter-rouge">main.rs</code> æ–‡ä»¶, ç„¶åé”®å…¥ä¸‹è¿°å†…å®¹.</p>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"Hello, world!"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ç„¶åæ‰§è¡Œ<code class="highlighter-rouge">rustc main.rs</code>å¾—åˆ°ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶<code class="highlighter-rouge">./main</code>å³å¯çœ‹åˆ°æ‰“å°</p>

<h3 id="cargo">Cargo</h3>

<p>å¦‚æœå®‰è£…çš„æ—¶å€™ç”¨çš„æ˜¯å®˜ç½‘çš„æ–¹æ³•çš„è¯, æ˜¯ä¼šè®©ä½ é€‰æ‹©ç¬¬å‡ ä¸ªå®‰è£…æ–¹å¼, æˆ‘ä»¬é€šå¸¸é€‰æ‹©ç¬¬ä¸€ä¸ªé‡‡ç”¨é»˜è®¤çš„æ–¹å¼, è¿™æ ·å°±ä¼šæŠŠCargoæ‰€éœ€è¦çš„ä¹Ÿå°±ä¸€èµ·ä¸‹è½½å®‰è£…ä¸‹æ¥äº†. åœ¨åˆ°æˆ‘ä»¬é…ç½®ç¯å¢ƒè¾“å…¥çš„<code class="highlighter-rouge">PATH</code>ä¹Ÿæ˜¯ä¸€æ ·</p>

<ol>
  <li>
    <p>æ–°å»ºé¡¹ç›®
<code class="highlighter-rouge">cargo new hello_cargo</code></p>
  </li>
  <li>
    <p>ç¼–è¯‘é¡¹ç›®
<code class="highlighter-rouge">cargo build</code> or <code class="highlighter-rouge">cargo build --release</code></p>
  </li>
  <li>
    <p>è¿è¡Œé¡¹ç›®
<code class="highlighter-rouge">cargo run</code></p>
  </li>
</ol>

<h3 id="ç¼–å†™çŒœè°œæ¸¸æˆ">ç¼–å†™çŒœè°œæ¸¸æˆ</h3>

<ol>
  <li>
    <p>ç›´æ¥ç¼–å†™</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>    <span class="c">// ä½¿ç”¨æ ‡å‡†åº“çš„io</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"Guess the number!"</span><span class="p">);</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"Please input your guess."</span><span class="p">);</span>

     <span class="k">let</span> <span class="k">mut</span> <span class="n">guess</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span> <span class="c">// å®šä¹‰ä¸€ä¸ªå¯å˜çš„å˜é‡</span>

     <span class="nn">io</span><span class="p">::</span><span class="nf">stdin</span><span class="p">()</span><span class="nf">.read_line</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">guess</span><span class="p">)</span>   <span class="c">// æ¢è¡Œçš„åŸå› åªæ˜¯å› ä¸ºè¿‡é•¿äº†</span>
         <span class="nf">.expect</span><span class="p">(</span><span class="s">"Failed to read line"</span><span class="p">);</span> <span class="c">// å¤„ç†å¯èƒ½çš„æŠ¥é”™</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"You guessed: {}"</span><span class="p">,</span> <span class="n">guess</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>åŠ å…¥<code class="highlighter-rouge">rand</code>åº“</p>

    <p>åœ¨<code class="highlighter-rouge">Cargo.toml</code>æ–‡ä»¶ä¸­åŠ å…¥</p>

    <div class="language-toml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nn">[dependencies]</span>

 <span class="py">rand</span> <span class="p">=</span> <span class="s">"0.3.14"</span>
</code></pre></div>    </div>

    <p>ç„¶åç¼–è¯‘<code class="highlighter-rouge">cargo build</code>æˆ–è€…æ˜¯<code class="highlighter-rouge">cargo run</code>å¯èƒ½ä¼šé‡åˆ°
 <code class="highlighter-rouge">Blocking waiting for file lock on package cache</code>
 å¦‚æœæ‰§è¡Œå¾—æ˜¯<code class="highlighter-rouge">cargo update</code>å°±ä¸ä¼šé‡åˆ°<code class="highlighter-rouge">Cargo.lock</code>æ–‡ä»¶äº†</p>

    <p>è¿™é‡ŒæŒ‡å®šäº†<code class="highlighter-rouge">0.3.14</code>ç‰ˆæœ¬å¹¶ä¸æ˜¯çœŸçš„å°±åªä½¿ç”¨è¯¥ç‰ˆæœ¬, è€Œæ˜¯ä¼šä½¿ç”¨å…¼å®¹è¯¥ç‰ˆæœ¬çš„æ›´é«˜ç‰ˆæœ¬</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>
 <span class="k">use</span> <span class="nn">rand</span><span class="p">::</span><span class="n">Rng</span><span class="p">;</span>  <span class="c">// å¯¼å…¥ éšæœºåº“</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"Guess the number!"</span><span class="p">);</span>

     <span class="k">let</span> <span class="n">secret_number</span> <span class="o">=</span> <span class="nn">rand</span><span class="p">::</span><span class="nf">thread_rng</span><span class="p">()</span><span class="nf">.gen_range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">);</span>   <span class="c">// ç”Ÿæˆä¸€ä¸ª 0 ~ 100 çš„éšæœºæ•°</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"The secret number is: {}"</span><span class="p">,</span> <span class="n">secret_number</span><span class="p">);</span>    <span class="c">// æµ‹è¯•æ‰“å°</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"Please input your guess."</span><span class="p">);</span>

     <span class="k">let</span> <span class="k">mut</span> <span class="n">guess</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>

     <span class="nn">io</span><span class="p">::</span><span class="nf">stdin</span><span class="p">()</span><span class="nf">.read_line</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">guess</span><span class="p">)</span>
         <span class="nf">.expect</span><span class="p">(</span><span class="s">"Failed to read line"</span><span class="p">);</span>

     <span class="c">// trim çš„æ˜¯å°±æ˜¯åˆ é™¤æŸäº›ä¸œè¥¿ ç”±äº é”®å…¥çš„æ—¶å€™æœ€åé¢ä¼šæ•²å‡»å›è½¦ å¯¼è‡´\nä¼šåŠ å…¥è¿›æ¥</span>
     <span class="k">let</span> <span class="n">guess</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="n">guess</span><span class="nf">.trim</span><span class="p">()</span><span class="nf">.parse</span><span class="p">()</span>   <span class="c">// ç”¨ åŒä¸€ä¸ªå˜é‡å å»è¦†ç›– guess å¹¶è½¬æˆ u32ç±»å‹</span>
         <span class="nf">.expect</span><span class="p">(</span><span class="s">"Please type a number!"</span><span class="p">);</span>   <span class="c">// è½¬æ¢ç±»å‹ä¹Ÿæ˜¯æœ‰å¯èƒ½æŠ¥é”™çš„</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"You guessed: {}"</span><span class="p">,</span> <span class="n">guess</span><span class="p">);</span>

     <span class="k">match</span> <span class="n">guess</span><span class="nf">.cmp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">secret_number</span><span class="p">)</span> <span class="p">{</span>
         <span class="nn">Ordering</span><span class="p">::</span><span class="n">Less</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"Too small!"</span><span class="p">),</span>
         <span class="nn">Ordering</span><span class="p">::</span><span class="n">Greater</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"Too big!"</span><span class="p">),</span>
         <span class="nn">Ordering</span><span class="p">::</span><span class="n">Equal</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"You win!"</span><span class="p">),</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>åŠ å…¥å¾ªç¯</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// --snip--</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"The secret number is: {}"</span><span class="p">,</span> <span class="n">secret_number</span><span class="p">);</span>

     <span class="k">loop</span> <span class="p">{</span>  <span class="c">// åŠ å…¥å¾ªç¯</span>
         <span class="nd">println!</span><span class="p">(</span><span class="s">"Please input your guess."</span><span class="p">);</span>

         <span class="c">// --snip--</span>

         <span class="k">match</span> <span class="n">guess</span><span class="nf">.cmp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">secret_number</span><span class="p">)</span> <span class="p">{</span>
             <span class="nn">Ordering</span><span class="p">::</span><span class="n">Less</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"Too small!"</span><span class="p">),</span>
             <span class="nn">Ordering</span><span class="p">::</span><span class="n">Greater</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"Too big!"</span><span class="p">),</span>
             <span class="nn">Ordering</span><span class="p">::</span><span class="n">Equal</span> <span class="k">=&gt;</span> <span class="p">{</span>
                 <span class="nd">println!</span><span class="p">(</span><span class="s">"You win!"</span><span class="p">);</span>
                 <span class="k">break</span><span class="p">;</span>  <span class="c">// åœ¨è¿™é‡Œé€€å‡ºå¾ªç¯</span>
             <span class="p">},</span>
         <span class="p">}</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å¤„ç†éæ•°å­—çš„è¾“å…¥</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// --snip--</span>

 <span class="nn">io</span><span class="p">::</span><span class="nf">stdin</span><span class="p">()</span><span class="nf">.read_line</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">guess</span><span class="p">)</span>
     <span class="nf">.expect</span><span class="p">(</span><span class="s">"Failed to read line"</span><span class="p">);</span>

 <span class="c">// åŠ å…¥matchæ¥å¯¹æŠ¥é”™çš„ continueæ¥å¤„ç†éæ•°å­—çš„è¾“å…¥</span>
 <span class="k">let</span> <span class="n">guess</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="k">match</span> <span class="n">guess</span><span class="nf">.trim</span><span class="p">()</span><span class="nf">.parse</span><span class="p">()</span> <span class="p">{</span>
     <span class="nf">Ok</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">num</span><span class="p">,</span>
     <span class="nf">Err</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">continue</span><span class="p">,</span>
 <span class="p">};</span>

 <span class="nd">println!</span><span class="p">(</span><span class="s">"You guessed: {}"</span><span class="p">,</span> <span class="n">guess</span><span class="p">);</span>

 <span class="c">// --snip--</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="é€šç”¨ç¼–ç¨‹æ¦‚å¿µ">é€šç”¨ç¼–ç¨‹æ¦‚å¿µ</h3>

<h4 id="å˜é‡å’Œå¯å˜æ€§">å˜é‡å’Œå¯å˜æ€§</h4>

<ol>
  <li>è¿™é‡Œçš„å˜é‡ä¸æ˜¯æŒ‡èƒ½å˜çš„é‡, è€Œæ˜¯ä¸€ä¸ªå®šä¹‰, ä½†åªè¦èµ‹äºˆäº† <code class="highlighter-rouge">mut</code> æ‰æ˜¯çœŸçš„å¯ä»¥å˜</li>
  <li>å¸¸é‡çš„å‘½åè§„åˆ™ å•è¯å…¨å¤§å†™ ä¸‹åˆ’çº¿åˆ†éš” å°±è¿int <code class="highlighter-rouge">100,000</code> éƒ½å¯ä»¥è¡¨ç¤ºä¸º <code class="highlighter-rouge">100_000</code></li>
  <li>å˜é‡å¯ä»¥è¢«é‡å¤å£°æ˜å¹¶è¦†ç›–åŸå€¼ ä½†ä¸èƒ½æ”¹å˜åŸæœ‰æ•°æ®ç±»å‹ ä¹Ÿå°±æ˜¯ä¸èƒ½ string =&gt; int</li>
</ol>

<h4 id="èµ„æ–™ç±»å‹">èµ„æ–™ç±»å‹</h4>

<ol>
  <li>
    <p>ç¼–è¯‘æ—¶éœ€è¦å¸®å¿™ç¡®å®šç±»å‹</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="n">guess</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="s">"42"</span><span class="nf">.parse</span><span class="p">()</span><span class="nf">.expect</span><span class="p">(</span><span class="s">"Not a number!"</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ•´å‹çš„è¡¨ç¤ºå½¢å¼æœ‰</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cm">/*
     å°æ•°        98_222
     åå…­        0xff
     å…«è¿›        0o77
     äºŒå…ƒ        0b1111_0000
     å­—èŠ‚ï¼ˆu8ä»…ï¼‰ b'A'
 */</span>
</code></pre></div>    </div>
  </li>
  <li>boolç±»å‹å°±åªæœ‰çœŸå‡ ä¸ä¼šé»˜è®¤å¸®å¿™è½¬æ¢</li>
  <li>
    <p>å…ƒç»„</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="nb">i32</span><span class="p">,</span> <span class="nb">f64</span><span class="p">,</span> <span class="nb">u8</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mf">6.4</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
     <span class="k">let</span> <span class="n">five_hundred</span> <span class="o">=</span> <span class="n">x</span><span class="err">.</span><span class="mi">0</span><span class="p">;</span>
     <span class="k">let</span> <span class="n">six_point_four</span> <span class="o">=</span> <span class="n">x</span><span class="err">.</span><span class="mi">1</span><span class="p">;</span>
     <span class="k">let</span> <span class="n">one</span> <span class="o">=</span> <span class="n">x</span><span class="err">.</span><span class="mi">2</span><span class="p">;</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ•°ç»„</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">c</span><span class="p">:</span> <span class="p">[</span><span class="nb">i32</span><span class="p">;</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">;</span> <span class="mi">5</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">first</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">second</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="å‡½æ•°">å‡½æ•°</h4>

<ol>
  <li>ä¸å¸¦;è¡¨ç¤ºè¿”å›å€¼</li>
  <li>
    <p>æŒ‡å®šè¿”å›å€¼</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">plus_one</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
     <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="æ³¨é‡Š">æ³¨é‡Š</h4>

<p>è®²è§£Crates.ioçš„æ—¶å€™æ‰è¯´</p>

<h4 id="æ§åˆ¶æµ">æ§åˆ¶æµ</h4>

<ol>
  <li>
    <p>ä½¿ç”¨<code class="highlighter-rouge">if</code>çš„<code class="highlighter-rouge">let</code>è¯­å¥</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">condition</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
     <span class="k">let</span> <span class="n">number</span> <span class="o">=</span> <span class="k">if</span> <span class="n">condition</span> <span class="p">{</span>
         <span class="mi">5</span>
     <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="mi">6</span>
     <span class="p">};</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"The value of number is: {}"</span><span class="p">,</span> <span class="n">number</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ä»å¾ªç¯é‡Œé¢è¿”å›å€¼å‡ºæ¥</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

     <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="k">loop</span> <span class="p">{</span>
         <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>

         <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="mi">10</span> <span class="p">{</span>
             <span class="k">break</span> <span class="n">counter</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span><span class="c">// æˆ‘åœ¨æƒ³ è¿™é‡Œæ²¡æœ‰; ä¸ºä»€ä¹ˆä¹Ÿèƒ½æœ‰å€¼è¿”å›å‡ºå»å‘¢?</span>
         <span class="p">}</span>
     <span class="p">};</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"The result is {}"</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>éå†</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">];</span>

     <span class="c">// æ–¹æ³•1</span>
     <span class="k">for</span> <span class="n">element</span> <span class="n">in</span> <span class="n">a</span><span class="nf">.iter</span><span class="p">()</span> <span class="p">{</span>
         <span class="nd">println!</span><span class="p">(</span><span class="s">"the value is: {}"</span><span class="p">,</span> <span class="n">element</span><span class="p">);</span>
     <span class="p">}</span>
     <span class="c">// æ–¹æ³•2</span>
     <span class="k">for</span> <span class="n">number</span> <span class="nf">in</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">4</span><span class="p">)</span><span class="nf">.rev</span><span class="p">()</span> <span class="p">{</span>
         <span class="nd">println!</span><span class="p">(</span><span class="s">"{}!"</span><span class="p">,</span> <span class="n">number</span><span class="p">);</span>
     <span class="p">}</span>
     <span class="c">// æ–¹æ³•3</span>
     <span class="k">while</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="p">{</span>
         <span class="nd">println!</span><span class="p">(</span><span class="s">"the value is: {}"</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
         <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="æ‰€æœ‰æƒ">æ‰€æœ‰æƒ</h3>

<h4 id="ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ">ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ</h4>

<ol>
  <li>
    <p>æ¯ä¸ªå†…å­˜åªèƒ½è¢«æ‰€æœ‰ä¸€æ¬¡, ä¸€æ—¦è¢«æ¥ç®¡äº†å°±æ²¡äº†.</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// ä¸‹è¿°ä»£ç å°±ä¼šæŠ¥é”™</span>
 <span class="k">let</span> <span class="n">s1</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">s1</span><span class="p">;</span>

 <span class="nd">println!</span><span class="p">(</span><span class="s">"{}, world!"</span><span class="p">,</span> <span class="n">s1</span><span class="p">);</span>

 <span class="cm">/*
     error[E0382]: use of moved value: `s1`
     --&gt; src/main.rs:5:28
     |
     3 |     let s2 = s1;
     |         -- value moved here
     4 |
     5 |     println!("{}, world!", s1);
     |                            ^^ value used here after move
     |
     = note: move occurs because `s1` has type `std::string::String`, which does
     not implement the `Copy` trait
 */</span>
</code></pre></div>    </div>
  </li>
  <li>å¦‚æœæƒ³è¦æ‹¿åˆ°ä¸€æ ·çš„å†…å®¹çš„è¯ ä½¿ç”¨ <code class="highlighter-rouge">clone</code></li>
  <li>å¯¹åŸºç¡€æ•°æ®ç±»å‹æ“ä½œçš„æ˜¯ ä¼šè‡ªåŠ¨è°ƒç”¨ <code class="highlighter-rouge">copy</code>, ç”±äºéƒ½æ˜¯åœ¨æ ˆåŒº, ä¸ä¼šäº§ç”Ÿæ–°çš„å†…å­˜ç©ºé—´</li>
  <li>å¦‚æœç›´æ¥æŠŠæŸä¸ªå˜é‡äº¤ä»˜ç»™æŸä¸ªå‡½æ•°, è€Œè¯¥å‡½æ•°æ²¡æœ‰ç§»äº¤æ‰€æœ‰æƒå‡ºæ¥çš„è¯, ä»–å°†ä¸èƒ½å†è¢«ä½¿ç”¨äº†</li>
</ol>

<h3 id="å¼•ç”¨å’Œå€Ÿé˜…">å¼•ç”¨å’Œå€Ÿé˜…</h3>

<ol>
  <li>
    <p><code class="highlighter-rouge">&amp;</code> è¡¨ç¤ºå¼•ç”¨è¯¥å‚æ•°, ä½†ä¸èƒ½è¿›è¡Œå˜æ›´, å¦‚æœè¦å˜æ›´çš„è¯ éœ€è¦ <code class="highlighter-rouge">&amp;mut</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>

     <span class="nf">change</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">s</span><span class="p">);</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">change</span><span class="p">(</span><span class="n">some_string</span><span class="p">:</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">some_string</span><span class="nf">.push_str</span><span class="p">(</span><span class="s">", world"</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>ä¸èƒ½æœ‰ä¸¤æ¬¡å¯å˜å¼•ç”¨, å› ä¸ºä¸çŸ¥é“ä¾æ®è°çš„æ”¹å˜</li>
  <li>
    <p>åŒä¸Š, å¦‚æœè¿˜å­˜åœ¨å¤šä¸ªåç»­ä¾æ—§ä¼šä½¿ç”¨çš„ä¸å¯å˜å¼•ç”¨æ—¶å€™, ä¸èƒ½åˆ›å»ºå¯å˜å¼•ç”¨, å› ä¸ºä¸å¯å˜çš„å¼•ç”¨æ˜¯ä¸çŸ¥é“å¯å˜å¼•ç”¨çš„å­˜åœ¨çš„, ä½†å¦‚æœåœ¨ä½¿ç”¨åå¹¶ä¸”åç»­ä¸å†ä½¿ç”¨äº†ä¹‹å, å°±å…è®¸åˆ›å»ºå¯å˜å¼•ç”¨äº†</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>

 <span class="k">let</span> <span class="n">r1</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">;</span> <span class="c">// no problem</span>
 <span class="k">let</span> <span class="n">r2</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">;</span> <span class="c">// no problem</span>
 <span class="nd">println!</span><span class="p">(</span><span class="s">"{} and {}"</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">);</span>  <span class="c">// è¿™é‡Œä½¿ç”¨ä¹‹å åç»­å°±ä¸å†ä½¿ç”¨äº† è¯´æ˜æ˜¯å¯ä»¥çš„</span>
 <span class="c">// r1 and r2 are no longer used after this point</span>

 <span class="k">let</span> <span class="n">r3</span> <span class="o">=</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="n">s</span><span class="p">;</span> <span class="c">// no problem</span>
 <span class="nd">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span> <span class="n">r3</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ‚¬ç©º, ä»€ä¹ˆæ„æ€å‘¢, å¯ä»¥ç†è§£ä¸ºåƒµå°¸æŒ‡é’ˆ</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">reference_to_nothing</span> <span class="o">=</span> <span class="nf">dangle</span><span class="p">();</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">dangle</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nb">String</span> <span class="p">{</span>    <span class="c">// è¿™é‡Œå°†è¿”å›ä¸€ä¸ªå¸¦æœ‰å¼•ç”¨çš„æ•°æ®ç±»å‹</span>
     <span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>  <span class="c">// ç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹, å¼€è¾Ÿå¯ä»¥ä¸€ä¸ªæ–°çš„å†…å­˜ç©ºé—´</span>

     <span class="o">&amp;</span><span class="n">s</span>  <span class="c">// ç§»äº¤å¼•ç”¨å‡ºå» ä»£è¡¨æ˜¯ æˆ‘åªæ˜¯å€Ÿä½ æ‹¿å»ç”¨çš„æ„æ€</span>
 <span class="p">}</span>   <span class="c">// ä½†è¿™é‡Œå°±å·²ç»è¢«é‡Šæ”¾äº† äº§ç”Ÿ åƒµå°¸æŒ‡é’ˆ</span>

 <span class="k">fn</span> <span class="nf">no_dangle</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>

     <span class="n">s</span>   <span class="c">// è¿™é‡Œæ˜¯æŠŠæ‰€æœ‰æƒç»™å‡ºå»äº† ä»£è¡¨æ˜¯ æˆ‘å¼€è¾Ÿçš„ç©ºé—´ æˆ‘ä¸è¦äº† ä½ æ‹¿å»ç”¨å§</span>
 <span class="p">}</span>   <span class="c">// è¿™æ ·ç»™å‡ºå»çš„å†…å­˜å°±ä¸ä¼šè¢«é‡Šæ”¾äº†</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="åˆ‡ç‰‡ç±»å‹">åˆ‡ç‰‡ç±»å‹</h4>

<ol>
  <li>
    <p>å…ˆçœ‹ä¸€ä¸ªè·å–ç¬¬ä¸€ä¸ªå•è¯çš„å‡½æ•°</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">// å€Ÿé˜…ä¸€ä¸ªå­—ç¬¦ä¸²   è¿”å›å•è¯çš„ä¸‹æ ‡</span>
 <span class="k">fn</span> <span class="nf">first_word</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">String</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">usize</span> <span class="p">{</span>
     <span class="c">// è½¬æ¢ä¸ºæ•°ç»„</span>
     <span class="k">let</span> <span class="n">bytes</span> <span class="o">=</span> <span class="n">s</span><span class="nf">.as_bytes</span><span class="p">();</span>

     <span class="c">// éå† bytes.iter() å¹¶ä¸”åˆ›å»ºè¿­ä»£å™¨ enumerate() å¯ä»¥ç†è§£ä¸º enumerate() ä¼šäº§ç”Ÿå‡ºä¸€ä¸ªå…ƒç»„æ¥</span>
     <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">item</span><span class="p">)</span> <span class="n">in</span> <span class="n">bytes</span><span class="nf">.iter</span><span class="p">()</span><span class="nf">.enumerate</span><span class="p">()</span> <span class="p">{</span>
         <span class="c">//  å€Ÿé˜…åˆ°äº† item</span>
         <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="n">b</span><span class="sc">' '</span> <span class="p">{</span>
             <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
         <span class="p">}</span>
     <span class="p">}</span>

     <span class="n">s</span><span class="nf">.len</span><span class="p">()</span> <span class="c">// ä¹ä¸€çœ‹æ²¡æœ‰é—®é¢˜ ä½†, å…¶å®è¿™é‡Œæ¶‰åŠåˆ°äº†å¾ˆå¤šé—®é¢˜, æ¯”æ–¹å•è¯é•¿åº¦æœªçŸ¥å’Œ s è¢«é”€æ¯äº† è¿™ç»„æ•°æ®å°±å¤±æ•ˆäº†</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å¼•å…¥åˆ‡ç‰‡</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>

     <span class="k">let</span> <span class="n">len</span> <span class="o">=</span> <span class="n">s</span><span class="nf">.len</span><span class="p">();</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">2</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="o">..</span><span class="mi">2</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="o">..</span><span class="n">len</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="o">..</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="n">len</span><span class="p">];</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="o">..</span><span class="p">];</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">&amp;str</code> è¡¨ç¤ºçš„æ˜¯åˆ‡ç‰‡ç±»å‹ <code class="highlighter-rouge">&amp;String</code> è¡¨ç¤ºçš„å­—ç¬¦ä¸²ç±»å‹</p>
  </li>
  <li>
    <p>æœ‰äº†åˆ‡ç‰‡è¿™ä¸ªæ¦‚å¿µä¹‹åå°±å¯ä»¥æ”¹å†™å–ç¬¬ä¸€ä¸ªå•è¯çš„å‡½æ•°äº†</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">first_word</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">String</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nb">str</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">bytes</span> <span class="o">=</span> <span class="n">s</span><span class="nf">.as_bytes</span><span class="p">();</span>

     <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">item</span><span class="p">)</span> <span class="n">in</span> <span class="n">bytes</span><span class="nf">.iter</span><span class="p">()</span><span class="nf">.enumerate</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="n">b</span><span class="sc">' '</span> <span class="p">{</span>
             <span class="k">return</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="n">i</span><span class="p">];</span>    <span class="c">// ç›´æ¥è¿”å›åˆ‡ç‰‡</span>
         <span class="p">}</span>
     <span class="p">}</span>
     <span class="c">// åˆšå¥½è¿™é‡Œçš„ s æ˜¯å€Ÿæ¥çš„ æ‰€ä»¥ç›´æ¥æ‹¿ç€è¿™ç©æ„ è½¬å€Ÿç»™åˆ«äººå°±è¡Œäº† æ²¡æˆ‘å•¥äº‹äº†çš„æ„æ€</span>
     <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="o">..</span><span class="p">]</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ä½¿ç”¨ä¸Šè¿°ä»£ç </p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"hello world"</span><span class="p">);</span>

     <span class="k">let</span> <span class="n">word</span> <span class="o">=</span> <span class="nf">first_word</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s</span><span class="p">);</span> <span class="c">// è¿™ä¸ªåˆ‡ç‰‡è¿˜æ˜¯ç”¨çš„ s çš„</span>

     <span class="n">s</span><span class="nf">.clear</span><span class="p">();</span> <span class="c">// è¿™é‡Œå°±ä¼šç›´æ¥æŠ¥é”™äº† å› ä¸ºä¼šè·å–sçš„å¯å˜å¼•ç”¨å¹¶ä¸”æŠŠå®ƒæ¸…ç©º, è€Œ worldæ˜¯ first_word å€Ÿäº†såˆè½¬æ‰‹ç»™äº†wordçš„ä¸€ä¸ªä¸å¯å˜å¼•ç”¨</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"the first word is: {}"</span><span class="p">,</span> <span class="n">word</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>æŠŠä¼ å…¥çš„ <code class="highlighter-rouge">&amp;String</code> ç±»å‹å˜æˆ <code class="highlighter-rouge">&amp;str</code> ç±»å‹ å°±å¯ä»¥æ¥å— åˆ‡ç‰‡å’Œå­—ç¬¦ä¸²äº† å› ä¸ºå­—ç¬¦ä¸²å°±æ˜¯å…¨åˆ‡ç‰‡</li>
  <li>
    <p>å…¶ä»–çš„åˆ‡ç‰‡</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>    <span class="c">// ä»–çš„ç±»å‹æ˜¯   [i32; 5]</span>
     <span class="k">let</span> <span class="n">slice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">];</span>       <span class="c">// åˆ‡ç‰‡çš„ç±»å‹æ˜¯ &amp;[i32]</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="ä½¿ç”¨ç»“æ„ä½“æ¥æ„é€ ç›¸å…³æ•°æ®">ä½¿ç”¨ç»“æ„ä½“æ¥æ„é€ ç›¸å…³æ•°æ®</h3>

<h4 id="å®šä¹‰å’Œå®ä¾‹åŒ–ç»“æ„">å®šä¹‰å’Œå®ä¾‹åŒ–ç»“æ„</h4>

<ol>
  <li>
    <p>å®šä¹‰ä¸€ä¸ªç»“æ„ä½“</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">struct</span> <span class="n">User</span> <span class="p">{</span>
     <span class="n">username</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>   <span class="c">// ç°åœ¨å…ˆä¸å£°æ˜ä¸º &amp;str åˆ‡ç‰‡ç±»å‹ ä¼šæ¶‰åŠåˆ°ç”Ÿå‘½å‘¨æœŸ</span>
     <span class="n">email</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
     <span class="n">sign_in_count</span><span class="p">:</span> <span class="nb">u64</span><span class="p">,</span>
     <span class="n">active</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">build_user</span><span class="p">(</span><span class="n">email</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">User</span> <span class="p">{</span>
     <span class="n">User</span> <span class="p">{</span>
         <span class="n">email</span><span class="p">:</span> <span class="n">email</span><span class="p">,</span>
         <span class="n">username</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
         <span class="n">active</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
         <span class="n">sign_in_count</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
     <span class="p">}</span>
 <span class="p">}</span>
 <span class="c">// ç®€åŒ–å†™æ³•</span>
 <span class="k">fn</span> <span class="nf">build_user</span><span class="p">(</span><span class="n">email</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">User</span> <span class="p">{</span>
     <span class="n">User</span> <span class="p">{</span>
         <span class="n">email</span><span class="p">,</span>
         <span class="n">username</span><span class="p">,</span>
         <span class="n">active</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
         <span class="n">sign_in_count</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
     <span class="p">}</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="k">mut</span> <span class="n">user1</span> <span class="o">=</span> <span class="n">User</span> <span class="p">{</span>
         <span class="n">email</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"someone@example.com"</span><span class="p">),</span>
         <span class="n">username</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"someusername123"</span><span class="p">),</span>
         <span class="n">active</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
         <span class="n">sign_in_count</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
     <span class="p">};</span>

     <span class="c">// ç‚¹è¯­æ³•ç›´æ¥æ›´æ”¹</span>
     <span class="n">user1</span><span class="py">.email</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"anotheremail@example.com"</span><span class="p">);</span>

     <span class="c">// æ–°å»ºuser2</span>
     <span class="k">let</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">User</span> <span class="p">{</span>
         <span class="n">email</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"another@example.com"</span><span class="p">),</span>
         <span class="n">username</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"anotherusername567"</span><span class="p">),</span>
         <span class="n">active</span><span class="p">:</span> <span class="n">user1</span><span class="py">.active</span><span class="p">,</span>
         <span class="n">sign_in_count</span><span class="p">:</span> <span class="n">user1</span><span class="py">.sign_in_count</span><span class="p">,</span>
     <span class="p">};</span>

     <span class="c">// ä½†å¯ä»¥å†™æˆè¿™æ ·</span>
     <span class="k">let</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">User</span> <span class="p">{</span>
         <span class="n">email</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"another@example.com"</span><span class="p">),</span>
         <span class="n">username</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"anotherusername567"</span><span class="p">),</span>
         <span class="o">..</span><span class="n">user1</span> <span class="c">// å…¶ä»–å­—æ®µæ²¿ç”¨è¯¥å®ä¾‹</span>
     <span class="p">};</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å…ƒç»„ç»“æ„</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">struct</span> <span class="nf">Color</span><span class="p">(</span><span class="nb">i32</span><span class="p">,</span> <span class="nb">i32</span><span class="p">,</span> <span class="nb">i32</span><span class="p">);</span>
 <span class="k">struct</span> <span class="nf">Point</span><span class="p">(</span><span class="nb">i32</span><span class="p">,</span> <span class="nb">i32</span><span class="p">,</span> <span class="nb">i32</span><span class="p">);</span>

 <span class="k">let</span> <span class="n">black</span> <span class="o">=</span> <span class="nf">Color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
 <span class="k">let</span> <span class="n">origin</span> <span class="o">=</span> <span class="nf">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ‰“å°ç»“æ„ é¦–å…ˆæ·»åŠ  <code class="highlighter-rouge">#[derive(Debug)]</code> å’Œ ç„¶åæ”¹ <code class="highlighter-rouge">{}</code> ä¸º <code class="highlighter-rouge">{:?}</code> æˆ– <code class="highlighter-rouge">{:#?}</code> å¤šè¡Œæ‰“å°
å•è¡Œæ‰“å° : è¡¨ç¤ºæ‰“å°å‡ºæ¥çš„é”®å€¼ä¸­é—´çš„ : ? è¡¨ç¤ºçš„æ˜¯ å€¼ # è¡¨ç¤ºç«‹èµ·æ¥ å˜æˆå¤šè¡Œ å½¢å¼ä¸»ä¹‰.. ä¸ªäººç†è§£</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="err">#</span><span class="p">[</span><span class="nf">derive</span><span class="p">(</span><span class="n">Debug</span><span class="p">)]</span>
 <span class="k">struct</span> <span class="n">Rectangle</span> <span class="p">{</span>
     <span class="n">width</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
     <span class="n">height</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">test_rect</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">rect1</span> <span class="o">=</span> <span class="n">Rectangle</span> <span class="p">{</span> <span class="n">width</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">50</span> <span class="p">};</span>

     <span class="nd">println!</span><span class="p">(</span><span class="s">"rect1 is {:?}"</span><span class="p">,</span> <span class="n">rect1</span><span class="p">);</span>   <span class="c">// è¡¨ç¤ºçš„æ„æ€æ˜¯</span>
     <span class="nd">println!</span><span class="p">(</span><span class="s">"rect1 is {:#?}"</span><span class="p">,</span> <span class="n">rect1</span><span class="p">);</span>
 <span class="p">}</span>

</code></pre></div>    </div>
  </li>
</ol>

<h4 id="æ–¹å—è¯­æ³•">æ–¹å—è¯­æ³•</h4>

<ol>
  <li>
    <p>å®ç°ä¸€ä¸ªæ–¹æ³•</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="err">#</span><span class="p">[</span><span class="nf">derive</span><span class="p">(</span><span class="n">Debug</span><span class="p">)]</span>
 <span class="k">struct</span> <span class="n">Rectangle</span> <span class="p">{</span>
     <span class="n">width</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
     <span class="n">height</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
 <span class="p">}</span>

 <span class="c">// å®ç° å¯ä»¥æœ‰å¤šä¸ªå®ç°</span>
 <span class="k">impl</span> <span class="n">Rectangle</span> <span class="p">{</span>
     <span class="c">// è¿™é‡Œçš„selféƒ½åªæ˜¯å€Ÿæ¥çš„ åªåšè®¿é—®å˜é‡ä½¿ç”¨</span>
     <span class="c">// ä½†å¦‚æœè¦ç”¨æ¥ä¿®æ”¹å…¶å†…å®¹çš„è¯ ä¹Ÿæ˜¯éœ€è¦åŠ ä¸Šmut</span>
     <span class="k">fn</span> <span class="nf">area</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span>
         <span class="k">self</span><span class="py">.width</span> <span class="o">*</span> <span class="k">self</span><span class="py">.height</span>
     <span class="p">}</span>
 <span class="p">}</span>

 <span class="k">impl</span> <span class="n">Rectangle</span> <span class="p">{</span>
     <span class="c">// å¯ä»¥ç†è§£ä¸ºå®šä¹‰äº†ä¸€ä¸ª ç±»å‡½æ•° åªèƒ½é€šè¿‡ç±»æ¥è°ƒç”¨ è°ƒç”¨æ–¹å¼ é‡‡ç”¨ :: åŒå†’å·å½¢å¼</span>
     <span class="k">fn</span> <span class="nf">square</span><span class="p">(</span><span class="n">size</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Rectangle</span> <span class="p">{</span>
         <span class="n">Rectangle</span> <span class="p">{</span> <span class="n">width</span><span class="p">:</span> <span class="n">size</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="n">size</span> <span class="p">}</span>
     <span class="p">}</span>
 <span class="p">}</span>

 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">let</span> <span class="n">rect1</span> <span class="o">=</span> <span class="n">Rectangle</span> <span class="p">{</span> <span class="n">width</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">50</span> <span class="p">};</span>

     <span class="nd">println!</span><span class="p">(</span>
         <span class="s">"The area of the rectangle is {} square pixels."</span><span class="p">,</span>
         <span class="n">rect1</span><span class="nf">.area</span><span class="p">()</span>
     <span class="p">);</span>

     <span class="k">let</span> <span class="n">sq</span> <span class="o">=</span> <span class="nn">Rectangle</span><span class="p">::</span><span class="nf">square</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
 <span class="p">}</span>

</code></pre></div>    </div>
  </li>
  <li>
    <p>è‡ªåŠ¨ä¿®æ”¹è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹, ä»…ä»…é’ˆå¯¹ <code class="highlighter-rouge">self</code> å‚æ•°   ä¼šè‡ªåŠ¨æ·»åŠ ä»–çš„å˜ä½“ <code class="highlighter-rouge">&amp;</code>ï¼Œ<code class="highlighter-rouge">&amp;mut</code> æˆ– <code class="highlighter-rouge">*</code></p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="err">#</span><span class="o">!</span><span class="p">[</span><span class="nf">allow</span><span class="p">(</span><span class="n">unused_variables</span><span class="p">)]</span>
 <span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
     <span class="nd">#[derive(Debug,Copy,Clone)]</span>
     <span class="k">struct</span> <span class="n">Point</span> <span class="p">{</span>
         <span class="n">x</span><span class="p">:</span> <span class="nb">f64</span><span class="p">,</span>
         <span class="n">y</span><span class="p">:</span> <span class="nb">f64</span><span class="p">,</span>
     <span class="p">}</span>

     <span class="k">impl</span> <span class="n">Point</span> <span class="p">{</span>
         <span class="k">fn</span> <span class="nf">distance</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">Point</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f64</span> <span class="p">{</span>
             <span class="k">let</span> <span class="n">x_squared</span> <span class="o">=</span> <span class="nn">f64</span><span class="p">::</span><span class="nf">powi</span><span class="p">(</span><span class="n">other</span><span class="py">.x</span> <span class="err">-</span> <span class="k">self</span><span class="py">.x</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
             <span class="k">let</span> <span class="n">y_squared</span> <span class="o">=</span> <span class="nn">f64</span><span class="p">::</span><span class="nf">powi</span><span class="p">(</span><span class="n">other</span><span class="py">.y</span> <span class="err">-</span> <span class="k">self</span><span class="py">.y</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

             <span class="nn">f64</span><span class="p">::</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">x_squared</span> <span class="o">+</span> <span class="n">y_squared</span><span class="p">)</span>
         <span class="p">}</span>
     <span class="p">}</span>
     <span class="k">let</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">Point</span> <span class="p">{</span> <span class="n">x</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mf">0.0</span> <span class="p">};</span>
     <span class="k">let</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">Point</span> <span class="p">{</span> <span class="n">x</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mf">6.5</span> <span class="p">};</span>
     <span class="c">// è¿™ä¸¤ä¸ªæ–¹æ³•çš„è°ƒç”¨æ—¶ä¸€æ— æ‰€è°“çš„</span>
     <span class="n">p1</span><span class="nf">.distance</span><span class="p">(</span><span class="o">&amp;</span><span class="n">p2</span><span class="p">);</span>
     <span class="p">(</span><span class="o">&amp;</span><span class="n">p1</span><span class="p">)</span><span class="nf">.distance</span><span class="p">(</span><span class="o">&amp;</span><span class="n">p2</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

  </div>

  
    <div class="post-comments" itemprop="comment">
      

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://danyow.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


<script id="dsq-count-scr" src="//danyow.disqus.com/count.js" async></script>


    </div>
  

</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

&copy;  - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="https://blog.danyow.cn/feed.xml">RSS</a>

    </p>

  </div>

</footer>


  </body>

</html>
